function acp_get_alpha_value_from_color(a){var b;return a=a.replace(/ /g,""),a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(b=100*parseFloat(a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),b=parseInt(b)):b=100,b}function acp_update_alpha_value_on_color_control(a,b,c,d){var e,f,g;e=b.data("a8cIris"),f=b.data("wpWpColorPicker"),e._color._alpha=a,g=e._color.toString(),b.val(g),f.toggler.css({"background-color":g}),d&&acp_update_alpha_value_on_alpha_slider(a,c),b.wpColorPicker("color",g)}function acp_update_alpha_value_on_alpha_slider(a,b){b.slider("value",a),b.find(".ui-slider-handle").text(a.toString())}Color.prototype.toString=function(a){if("no-alpha"==a)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var b=parseInt(this._color,10).toString(16);if(this.error)return"";if(b.length<6)for(var c=6-b.length-1;c>=0;c--)b="0"+b;return"#"+b},jQuery(document).ready(function(a){a(".alpha-color-control").each(function(){var b,c,d,e,f,g,h,i,j,k,l;b=a(this),c=b.val().replace(/\s+/g,""),d=b.attr("data-palette"),e=b.attr("data-show-opacity"),f=b.attr("data-default-color"),g=-1!==d.indexOf("|")?d.split("|"):"false"==d?!1:!0,h={change:function(a,c){var d,e,g,h;d=b.attr("data-customize-setting-link"),e=b.wpColorPicker("color"),f==e&&(g=acp_get_alpha_value_from_color(e),j.find(".ui-slider-handle").text(g)),wp.customize(d,function(a){a.set(e)}),h=i.find(".transparency"),h.css("background-color",c.color.toString("no-alpha"))},palettes:g},b.wpColorPicker(h),i=b.parents(".wp-picker-container:first"),a('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(i.find(".wp-picker-holder")),j=i.find(".alpha-slider"),k=acp_get_alpha_value_from_color(c),l={create:function(b,d){var e=a(this).slider("value");a(this).find(".ui-slider-handle").text(e),a(this).siblings(".transparency ").css("background-color",c)},value:k,range:"max",step:1,min:0,max:100,animate:300},j.slider(l),"true"==e&&j.find(".ui-slider-handle").addClass("show-opacity"),i.find(".min-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(0,b,j,!0)}),i.find(".max-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(100,b,j,!0)}),i.find(".iris-palette").on("click",function(){var c,d;c=a(this).css("background-color"),d=acp_get_alpha_value_from_color(c),acp_update_alpha_value_on_alpha_slider(d,j),100!=d&&(c=c.replace(/[^,]+(?=\))/,(d/100).toFixed(2))),b.wpColorPicker("color",c)}),i.find(".button.wp-picker-clear").on("click",function(){var a=b.attr("data-customize-setting-link");b.wpColorPicker("color","#ffffff"),wp.customize(a,function(a){a.set("")}),acp_update_alpha_value_on_alpha_slider(100,j)}),i.find(".button.wp-picker-default").on("click",function(){var a=acp_get_alpha_value_from_color(f);acp_update_alpha_value_on_alpha_slider(a,j)}),b.on("input",function(){var b=a(this).val(),c=acp_get_alpha_value_from_color(b);acp_update_alpha_value_on_alpha_slider(c,j)}),j.slider().on("slide",function(c,d){var e=parseFloat(d.value)/100;acp_update_alpha_value_on_color_control(e,b,j,!1),a(this).find(".ui-slider-handle").text(d.value)})})});