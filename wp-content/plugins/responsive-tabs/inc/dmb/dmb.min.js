/**
 * Team Members Admin JS
 */

;(function($){$(document).ready(function(){(function(original){jQuery.fn.clone=function(){var result=original.apply(this,arguments),my_textareas=this.find('textarea').add(this.filter('textarea')),result_textareas=result.find('textarea').add(result.filter('textarea')),my_selects=this.find('select').add(this.filter('select')),result_selects=result.find('select').add(result.filter('select'));for(var i=0,l=my_textareas.length;i<l;++i)$(result_textareas[i]).val($(my_textareas[i]).val());for(var i=0,l=my_selects.length;i<l;++i)result_selects[i].selectedIndex=my_selects[i].selectedIndex;return result}})(jQuery.fn.clone);var pluginFolderSlug='responsive-tabs';var hexDigits=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function dmb_rgb2hex(rgb){if(rgb){rgb=rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+dmb_hex(rgb[1])+dmb_hex(rgb[2])+dmb_hex(rgb[3])}else{return}}
function dmb_hex(x){return isNaN(x)?"00":hexDigits[(x-x%16)/16]+hexDigits[x%16]}
$('.dmb_color_picker').wpColorPicker();$('.dmb_main').not('.dmb_empty_row').each(function(i,obj){$(this).find('.dmb_tab_content').each(function(i,obj){if($.trim($(this).text())==''){$(this).hide()}else{$(this).show()}
$(this).html($.parseHTML($(this).text()))})});function refreshRowCountRelatedUI(){if($('.dmb_main').not('.dmb_empty_row').length>0){$('.dmb_no_row_notice').hide()}else{$('.dmb_no_row_notice').show()}}
refreshRowCountRelatedUI();$('.dmb_add_row').on('click',function(){var row=$('.dmb_empty_row').clone(!0);row.removeClass('dmb_empty_row').addClass('dmb_main').show();row.insertBefore($('.dmb_empty_row'));row.find('.dmb_tab_title').focus();row.find('.dmb_color_picker_ready').removeClass('.dmb_color_picker_ready').addClass('.dmb_color_picker').wpColorPicker().css({'padding':'3px'});row.find('.dmb_handle_title').html(objectL10n.untitled);row.find('.dmb_tab_content').hide();refreshRowCountRelatedUI();return!1});$('.dmb_remove_row_btn').click(function(e){$(this).closest('.dmb_main').remove();refreshRowCountRelatedUI();return!1});$('.dmb_handle').click(function(e){$(this).siblings('.dmb_inner').slideToggle(50);($(this).hasClass('closed'))?$(this).removeClass('closed'):$(this).addClass('closed');return!1});$('.dmb_collapse_rows').click(function(e){$('.dmb_handle').each(function(i,obj){if(!$(this).closest('.dmb_empty_row').length){if($(this).hasClass('closed')){}else{$(this).siblings('.dmb_inner').slideToggle(50);$(this).addClass('closed')}}});return!1});$('.dmb_expand_rows').click(function(e){$('.dmb_handle').each(function(i,obj){if($(this).hasClass('closed')){$(this).siblings('.dmb_inner').slideToggle(50);$(this).removeClass('closed')}});return!1});$('.dmb_move_row_down').click(function(e){if($(this).closest('.dmb_main').next().hasClass('dmb_main')){var movingRow=$(this).closest('.dmb_main').clone(!0);movingRow.insertAfter($(this).closest('.dmb_main').next());$(this).closest('.dmb_main').remove()}
return!1});$('.dmb_move_row_up').click(function(e){if($(this).closest('.dmb_main').prev().hasClass('dmb_main')){var movingRow=$(this).closest('.dmb_main').clone(!0);movingRow.insertBefore($(this).closest('.dmb_main').prev());$(this).closest('.dmb_main').remove()}
return!1});$('.dmb_clone_row').click(function(e){var clone=$(this).closest('.dmb_main').clone(!0);clone.insertAfter($(this).closest('.dmb_main'));clone.find('.dmb_handle_title').html(clone.find('.dmb_tab_title').val()+' (copy)');clone.find('.dmb_tab_title').focus();updateHandleTitle(clone.find('.dmb_tab_title'),!0);refreshRowCountRelatedUI();return!1});$('.dmb_main').not('.dmb_empty_row').each(function(i,obj){if($(this).find('.dmb_tab_title').val()!=''){updateHandleTitle($(this).find('.dmb_tab_title'))}});function updateHandleTitle(titleField,wasCloned){if(!wasCloned){wasCloned=!1}
var titleField=titleField,handleTitle=titleField.closest('.dmb_main').find('.dmb_handle_title');cloneCopyText='';(wasCloned)?cloneCopyText=' copy':cloneCopyText='';(titleField.val()!='')?handleTitle.html(titleField.val()+cloneCopyText):handleTitle.html(objectL10n.untitled+cloneCopyText)}
$('.dmb_tab_title').live("keyup",function(e){updateHandleTitle($(this))});$('.dmb_show_preview_tab_set').click(function(){var settings={};var tabs={};var preview_html='';settings.breakpoint=$(".dmb_breakpoint").val();settings.color=dmb_rgb2hex($(".wp-color-result").css('backgroundColor'))||'#8dba09';settings.tabBackground=$("select[name='tabs_tbgs']").val();tabs.tabCount=$('.dmb_main').not('.dmb_empty_row').size();preview_html+='<div class="rtbs" style="margin-top:100px; margin-bottom:60px;">';preview_html+='<div class="rtbs_breakpoint" style="display:none">'+settings.breakpoint+'</div>';preview_html+='<div class="rtbs_inactive_tab_background" style="display:none">'+settings.tabBackground+'</div>';preview_html+='<div class="rtbs_color" style="display:none">'+settings.color+'</div>';preview_html+='<div class="rtbs_menu">'
preview_html+='<ul><li class="mobile_toggle">&zwnj;</li>';$('.dmb_main').not('.dmb_empty_row').each(function(i,obj){var fields={};fields.title=$(this).find(".dmb_tab_title").val();if($('#acf-fallback-bio').length){fields.content=$.trim($(this).find('.dmb_tab_content_fb').text())||''}else{fields.content=$.trim($(this).find('.dmb_tab_content').html())||''}
if(i==0){preview_html+="<style>.rtbs li {font-size:15px;} .rtbs_content, .rtbs_content p {font-size:15px;}</style>";preview_html+='<li class="current">';preview_html+='<a style="background:'+settings.color+'" class="active prev-tab-link-'+i+'" href="#" data-tab="#prev-tab-'+i+'">';(fields.title)?preview_html+=fields.title:preview_html+='&nbsp;';preview_html+='</a>';preview_html+='</li>'}else{preview_html+='<li style="font-size:15px;">';preview_html+='<a href="#" data-tab="#prev-tab-'+i+'" class="prev-tab-link-'+i+'">';(fields.title)?preview_html+=fields.title:preview_html+='&nbsp;';preview_html+='</a>';preview_html+='</li>'}});preview_html+='</ul></div>';$('.dmb_main').not('.dmb_empty_row').each(function(i,obj){var fields={};fields.title=$(this).find(".dmb_tab_title").val();if($('#acf-fallback-bio').length){fields.content=$.trim($(this).find('.dmb_tab_content_fb').text())||''}else{fields.content=$.trim($(this).find('.dmb_tab_content').html())||''}
if(i==0){preview_html+='<div style="border-top:7px solid '+settings.color+'; " id="prev-tab-'+i+'" class="rtbs_content active">';preview_html+=fields.content;preview_html+='<div style="margin-top:30px; clear:both;"></div></div>'}else{preview_html+='<div style="border-top:7px solid '+settings.color+'; " id="prev-tab-'+i+'" class="rtbs_content">';preview_html+=fields.content;preview_html+='<div style="margin-top:30px; clear:both;"></div></div>'}});preview_html+='</div>';preview_html+='<div style="clear:both;"></div>';preview_html+='<div class="dmb_accuracy_preview_notice">'+objectL10n.previewAccuracy+'</div>';(tabs.tabCount==0)?$('#dmb_preview_tabs').append('<div class="dmb_no_row_preview_notice">'+objectL10n.noTabNotice+'</div>'):$('#dmb_preview_tabs').append(preview_html);$('#dmb_preview_tabs').fadeIn(100)});$('.dmb_preview_tabs_close').click(function(){$('#dmb_preview_tabs .rtbs, .dmb_accuracy_preview_notice, .dmb_no_row_preview_notice').remove();$('#dmb_preview_tabs').fadeOut(100)});var lastEditedBio='';$('.dmb_edit_tab_content').click(function(){lastEditedBio=$(this).parent().find('.dmb_tab_content');var currentContent=lastEditedBio.html();if($("#wp-dmb_editor-wrap").hasClass("tmce-active")){tinyMCE.editors[0].setContent(currentContent)}else{$('#dmb_editor').val($.trim(currentContent))}
$('#dmb_unique_editor').fadeIn(100);if(tinyMCE.activeEditor!==null){tinyMCE.activeEditor.focus()}});$('.dmb_ue_update').click(function(){if($("#wp-dmb_editor-wrap").hasClass("tmce-active")){var dmb_ue_content=tinyMCE.activeEditor.getContent()}else{var dmb_ue_content=$('#dmb_editor').val()}(!dmb_ue_content)?lastEditedBio.hide():lastEditedBio.show();lastEditedBio.html($.parseHTML(dmb_ue_content));lastEditedBio.siblings('.biofield').val(dmb_ue_content);$('#dmb_unique_editor').fadeOut(100);if(tinymce.activeEditor!==null){tinymce.activeEditor.setContent('')}
return!1});$('.dmb_ue_cancel').click(function(){$('#dmb_unique_editor').fadeOut(100)})})})(jQuery);