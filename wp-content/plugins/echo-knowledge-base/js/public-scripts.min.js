jQuery(document).ready(function(t){var e=t("#epkb-main-page-container"),i=t("#epkb-content-container"),s=t(".epkb-nav-tabs li"),a=t(".epkb-tab-panel");function n(e){t(".epkb-panel-container .epkb-tab-panel:nth-child("+(e+1)+")").addClass("active")}function o(e,a){var t,i,s,n,o,c=window.location.href;t=c,i="top-category",s=a,n=new RegExp("([?&])"+i+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?",c=t.match(n)?t.replace(n,"$1"+i+"="+s+"$2"):t+o+i+"="+s,window.history.pushState({tab:e},"title",c)}t("body").on("submit","#epkb_search_form",function(e){if(e.preventDefault(),""!==t("#epkb_search_terms").val()){var a={action:"epkb-search-kb",epkb_kb_id:t("#epkb_kb_id").val(),search_words:t("#epkb_search_terms").val()},i="";t.ajax({type:"GET",dataType:"json",data:a,url:ajaxurl,beforeSend:function(e){t(".loading-spinner").css("display","block"),t("#epkb-ajax-in-progress").show()}}).done(function(e){e=e||"",t(".loading-spinner").css("display","none"),i=e.error||"success"!==e.status?epkb_vars.msg_try_again:e.search_result}).fail(function(e,a,t){i=epkb_vars.msg_try_again+". ["+(t||epkb_vars.unknown_error)+"]"}).always(function(){t("#epkb-ajax-in-progress").hide(),i&&(t("#epkb_search_results").css("display","block"),t("#epkb_search_results").html(i))})}}),t("#epkb_search_terms").keyup(function(){this.value||t("#epkb_search_results").css("display","none")}),t(window).on("load",function(){var a=0;i.find(s).each(function(){var e=t(this).outerHeight(!0);a<e&&(a=e)}),i.find(s).css("min-height",a)}),window.onpopstate=function(e){e.state&&-1!==e.state.tab.indexOf("epkb_tab_")?(i.find(".epkb_top_panel").removeClass("active"),0<t("#main-category-selection").length?t("#main-category-selection").val(i.find("#"+e.state.tab).val()):(i.find(".epkb_top_categories").removeClass("active"),i.find("#"+e.state.tab).addClass("active")),i.find("."+e.state.tab).addClass("active")):0<t("#epkb_tab_1").length&&!i.find("#epkb_tab_1").hasClass("active")&&(i.find(".epkb_top_panel").removeClass("active"),0<t("#main-category-selection").length?t("#main-category-selection").val(i.find("#epkb_tab_1").val()):(i.find(".epkb_top_categories").removeClass("active"),i.find("#epkb_tab_1").addClass("active")),i.find(".epkb_tab_1").addClass("active"))},i.find(s).each(function(){t(this).on("click",function(){i.find(s).removeClass("active"),t(this).addClass("active"),i.find(a).removeClass("active"),n(t(this).index()),o(t(this).attr("id"),t(this).data("cat-name"))})}),t("#main-category-selection").change(function(){i.find(a).removeClass("active"),t("#main-category-selection option:selected").each(function(){n(t(this).index()),o(t(this).attr("id"),t(this).data("cat-name"))})}),t(".epkb-section-body .epkb-category-level-2-3").each(function(){t(this).on("click",function(){t(this).next().toggleClass("active")})}),i.find(".epkb-section-body .epkb-category-level-2-3").each(function(){var a=t(this).find("i");t(this).on("click",function(){function e(e){a.hasClass(e[0])?(a.removeClass(e[0]),a.addClass(e[1])):a.hasClass(e[1])&&(a.removeClass(e[1]),a.addClass(e[0]))}e(["ep_font_icon_plus","ep_font_icon_minus"]),e(["ep_font_icon_plus_box","ep_font_icon_minus_box"]),e(["ep_font_icon_right_arrow","ep_font_icon_down_arrow"]),e(["ep_font_icon_arrow_carrot_right","ep_font_icon_arrow_carrot_down"]),e(["ep_font_icon_arrow_carrot_right_circle","ep_font_icon_arrow_carrot_down_circle"]),e(["ep_font_icon_folder_add","ep_font_icon_folder_open"])})}),e.find(".epkb-show-all-articles").on("click",function(){t(this).toggleClass("active");var e=t(this).parent("ul").find("li");t(this).hasClass("active")?(t(this).find(".epkb-show-text").addClass("epkb-hide-elem"),t(this).find(".epkb-hide-text").removeClass("epkb-hide-elem")):(t(this).find(".epkb-show-text").removeClass("epkb-hide-elem"),t(this).find(".epkb-hide-text").addClass("epkb-hide-elem")),t(e).each(function(){t(this).hasClass("epkb-hide-elem")?(t(this).removeClass("epkb-hide-elem"),t(this).addClass("visible")):t(this).hasClass("visible")&&(t(this).removeClass("visible"),t(this).addClass("epkb-hide-elem"))})})});