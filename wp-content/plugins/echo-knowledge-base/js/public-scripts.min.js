jQuery(document).ready(function(a){function b(b){a(".epkb-panel-container .epkb-tab-panel:nth-child("+(b+1)+")").addClass("active")}function c(a,b){var c=window.location.href;c=d(c,"top-category",b),window.history.pushState({tab:a},"title",c)}function d(a,b,c){var d=new RegExp("([?&])"+b+"=.*?(&|$)","i"),e=-1===a.indexOf("?")?"?":"&";return a.match(d)?a.replace(d,"$1"+b+"="+c+"$2"):a+e+b+"="+c}var e=a("#epkb-main-page-container"),f=a("#epkb-content-container"),g=a(".epkb-nav-tabs li"),h=a(".epkb-tab-panel");a("body").on("submit","#epkb_search_form",function(b){if(b.preventDefault(),""!==a("#epkb_search_terms").val()){var c={action:"epkb-search-kb",epkb_kb_id:a("#epkb_kb_id").val(),search_words:a("#epkb_search_terms").val()},d="";a.ajax({type:"GET",dataType:"json",data:c,url:ajaxurl,beforeSend:function(){a(".loading-spinner").css("display","block"),a("#epkb-ajax-in-progress").show()}}).done(function(b){b=b?b:"",a(".loading-spinner").css("display","none"),d=b.error||"success"!==b.status?epkb_vars.msg_try_again:b.search_result}).fail(function(a,b,c){d=epkb_vars.msg_try_again+". ["+(c?c:epkb_vars.unknown_error)+"]"}).always(function(){a("#epkb-ajax-in-progress").hide(),d&&(a("#epkb_search_results").css("display","block"),a("#epkb_search_results").html(d))})}}),a("#epkb_search_terms").keyup(function(){this.value||a("#epkb_search_results").css("display","none")}),a(window).on("load",function(){var b=0;f.find(g).each(function(){var c=a(this).outerHeight(!0);c>b&&(b=c)}),f.find(g).css("min-height",b)}),window.onpopstate=function(b){b.state&&-1!==b.state.tab.indexOf("epkb_tab_")?(f.find(".epkb_top_panel").removeClass("active"),0<a("#main-category-selection").length?a("#main-category-selection").val(f.find("#"+b.state.tab).val()):(f.find(".epkb_top_categories").removeClass("active"),f.find("#"+b.state.tab).addClass("active")),f.find("."+b.state.tab).addClass("active")):0<a("#epkb_tab_1").length&&!f.find("#epkb_tab_1").hasClass("active")&&(f.find(".epkb_top_panel").removeClass("active"),0<a("#main-category-selection").length?a("#main-category-selection").val(f.find("#epkb_tab_1").val()):(f.find(".epkb_top_categories").removeClass("active"),f.find("#epkb_tab_1").addClass("active")),f.find(".epkb_tab_1").addClass("active"))},f.find(g).each(function(){a(this).on("click",function(){f.find(g).removeClass("active"),a(this).addClass("active"),f.find(h).removeClass("active"),b(a(this).index()),c(a(this).attr("id"),a(this).data("cat-name"))})}),a("#main-category-selection").change(function(){f.find(h).removeClass("active"),a("#main-category-selection option:selected").each(function(){var d=a(this).index();b(d),c(a(this).attr("id"),a(this).data("cat-name"))})}),a(".epkb-section-body .epkb-category-level-2-3").each(function(){a(this).on("click",function(){a(this).next().toggleClass("active")})}),f.find(".epkb-section-body .epkb-category-level-2-3").each(function(){var b=a(this).find("i");a(this).on("click",function(){function a(a){b.hasClass(a[0])?(b.removeClass(a[0]),b.addClass(a[1])):b.hasClass(a[1])&&(b.removeClass(a[1]),b.addClass(a[0]))}a(["ep_font_icon_plus","ep_font_icon_minus"]),a(["ep_font_icon_plus_box","ep_font_icon_minus_box"]),a(["ep_font_icon_right_arrow","ep_font_icon_down_arrow"]),a(["ep_font_icon_arrow_carrot_right","ep_font_icon_arrow_carrot_down"]),a(["ep_font_icon_arrow_carrot_right_circle","ep_font_icon_arrow_carrot_down_circle"]),a(["ep_font_icon_folder_add","ep_font_icon_folder_open"])})}),e.find(".epkb-show-all-articles").on("click",function(){a(this).toggleClass("active");var b=a(this).parent("ul"),c=b.find("li");a(this).hasClass("active")?(a(this).find(".epkb-show-text").addClass("epkb-hide-elem"),a(this).find(".epkb-hide-text").removeClass("epkb-hide-elem")):(a(this).find(".epkb-show-text").removeClass("epkb-hide-elem"),a(this).find(".epkb-hide-text").addClass("epkb-hide-elem")),a(c).each(function(){a(this).hasClass("epkb-hide-elem")?(a(this).removeClass("epkb-hide-elem"),a(this).addClass("visible")):a(this).hasClass("visible")&&(a(this).removeClass("visible"),a(this).addClass("epkb-hide-elem"))})});let i=a("#epkb-search-kb").text();a("#epkb-search-kb").text(i)});