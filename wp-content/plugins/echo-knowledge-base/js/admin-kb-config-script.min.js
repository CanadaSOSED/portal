jQuery(document).ready(function(e){function a(){var a;a=!(e("#epkb-main-page-button").hasClass("epkb-active-page")&&e("#eckb-mm-mp-links-organize").hasClass("epkb-mm-active")||e("#epkb-article-page-button").hasClass("epkb-active-page")&&e("#eckb-mm-ap-links-organize").hasClass("epkb-mm-active")),e(".epkb-config-content .epkb-top-categories-list").sortable({axis:"x",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(e,a){t(),c("main_page",i())}}),e(".epkb-config-content .eckb-categories-list").sortable({axis:"x,y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(e,a){t()}}),e(".epkb-config-content .eckb-sub-category-ordering").sortable({axis:"x,y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(e,a){t()}}),e(".epkb-config-content .eckb-sub-sub-category-ordering").sortable({axis:"x,y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(e,a){t()}}),e(".epkb-config-content .eckb-articles-ordering, .eckb-articles-ordering").sortable({axis:"y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(a,t){u=!0,e("#epkb-main-page").closest(".epkb-info-pages").hasClass("epkb-active-page")?e("#epkb-config-ordering-sidebar").find("input[name=articles_display_sequence][value=user-sequenced]").click():e("#epkb-article-page").closest(".epkb-info-pages").hasClass("epkb-active-page")&&e("#epkb-config-article-ordering-sidebar").find("input[name=articles_display_sequence][value=user-sequenced]").click()}}),e(".epkb-config-content .epkb-top-categories-list").sortable("option","disabled",a),e(".epkb-config-content .eckb-categories-list").sortable("option","disabled",a),e(".epkb-config-content .eckb-sub-category-ordering").sortable("option","disabled",a),e(".epkb-config-content .eckb-sub-sub-category-ordering").sortable("option","disabled",a),e(".epkb-config-content .eckb-articles-ordering").sortable("option","disabled",a);var n=a?"auto":"move";e("#epkb-content-container").css("cursor",n,"important"),e(".epkb-config-content").find("a").css("cursor",n,"important")}function t(){u=!0,e("#epkb-main-page").closest(".epkb-info-pages").hasClass("epkb-active-page")?e("#epkb-config-ordering-sidebar").find("input[name=categories_display_sequence][value=user-sequenced]").click():e("#epkb-article-page").closest(".epkb-info-pages").hasClass("epkb-active-page")&&e("#epkb-config-article-ordering-sidebar").find("input[name=categories_display_sequence][value=user-sequenced]").click()}function i(){var a="";return e("#epkb-main-page-content").find("#epkb-content-container").length&&(e("#epkb-main-page-content").append('<div class="epkb-virtual-articles" style="display:none!important;">'+e("#epkb-main-page-content").find("#epkb-content-container").html()+"</div>"),e(".epkb-virtual-articles").find("ul.epkb-articles").each(function(){if(e(this).next().length&&"UL"==e(this).next().prop("tagName")){var a=e(this).parent();e(this).appendTo(a)}})),e("#epkb-main-page-content #elay-sidebar-layout-page-container").find(".elay-sidebar").length&&(e("#epkb-main-page-content #elay-sidebar-layout-page-container").append('<div class="epkb-virtual-articles" style="display:none!important;">'+e("#epkb-main-page-content #elay-sidebar-layout-page-container").find(".elay-sidebar").html()+"</div>"),e("#epkb-main-page-content .epkb-virtual-articles").find("ul.elay-articles").each(function(){if(e(this).next().length&&"UL"==e(this).next().prop("tagName")){var a=e(this).parent();e(this).appendTo(a)}})),e("#epkb-main-page-content #elay-grid-layout-page-container").length?(e("#epkb-main-page-content").find("[data-kb-type]").each(function(t,i){var n=e(this).data("kb-top-category-id")?e(this).data("kb-top-category-id"):"";if(n&&(a+="xx"+n+"xcategory"),void 0!==e(this).attr("data-kb-type")&&"top-category-no-articles"==e(this).attr("data-kb-type"))return!0;var o=void 0===e(this).data("kb-category-id")?e(this).data("kb-article-id"):e(this).data("kb-category-id");void 0!==o&&(a+="xx"+o+"x"+e(this).attr("data-kb-type"))}),a):(e("#epkb-main-page-content").find(".epkb-virtual-articles [data-kb-type]").each(function(t,i){var n=e(this).data("kb-top-category-id")?e(this).data("kb-top-category-id"):"";if(n&&(a+="xx"+n+"xcategory"),void 0!==e(this).attr("data-kb-type")&&"top-category-no-articles"==e(this).attr("data-kb-type"))return!0;var o=void 0===e(this).data("kb-category-id")?e(this).data("kb-article-id"):e(this).data("kb-category-id");void 0!==o&&(a+="xx"+o+"x"+e(this).attr("data-kb-type"))}),e("#epkb-main-page-content .epkb-virtual-articles").remove(),a)}function n(){var a="";return e("#epkb-article-page-content #elay-sidebar-layout-page-container").find(".elay-sidebar").length&&(e("#epkb-article-page-content #elay-sidebar-layout-page-container").append('<div class="epkb-virtual-articles" style="display:none!important;">'+e("#epkb-article-page-content #elay-sidebar-layout-page-container").find(".elay-sidebar").html()+"</div>"),e("#epkb-article-page-content .epkb-virtual-articles").find("ul.elay-articles").each(function(){if(e(this).next().length&&"UL"==e(this).next().prop("tagName")){var a=e(this).parent();e(this).appendTo(a)}})),e("#epkb-article-page-content .epkb-virtual-articles").find("[data-kb-type]").each(function(t,i){var n=e(this).data("kb-top-category-id")?e(this).data("kb-top-category-id"):"";n&&(a+="xx"+n+"xcategory");var o=void 0===e(this).data("kb-category-id")?e(this).data("kb-article-id"):e(this).data("kb-category-id");void 0!==o&&(a+="xx"+o+"x"+e(this).attr("data-kb-type"))}),e("#epkb-article-page-content .epkb-virtual-articles").remove(),a}function o(){var a="",t=e("#kb_article_page_layout input[name=kb_article_page_layout]:checked").val(),i=!("Tabs"!==e("#kb_main_page_layout input[name=kb_main_page_layout]:checked").val()||f||e("#epkb-article-page-button").hasClass("epkb-active-page")&&"Sidebar"===t);return f=!1,i&&void 0!==e(".epkb-top-categories-list")?(e(".epkb-top-categories-list").children().each(function(t,i){var n=e(this).find("[data-kb-category-id]").data("kb-category-id");n&&(a+="xx"+n)}),u=!0,a):a}function c(a,t){if(0!=t.length){var i,n={action:"epkb_change_article_category_sequence",_wpnonce_epkb_save_kb_config:e("#_wpnonce_epkb_save_kb_config").val(),epkb_kb_id:e("#epkb_config_kb_id").val(),form:e("#epkb-config-config, #epkb-config-config2").serialize(),page_type:a,articles_sequence_new_value:k("articles_display_sequence","articles_display_sequence"),categories_sequence_new_value:k("categories_display_sequence","categories_display_sequence"),epkb_new_sequence:t,epkb_chosen_main_page_layout:e("#kb_main_page_layout input[name=kb_main_page_layout]:checked").val(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),top_cat_sequence:o()};e.ajax({type:"POST",dataType:"json",data:n,url:ajaxurl,beforeSend:function(e){g("show","Loading..")}}).done(function(t){(t=t||"").error||void 0===t.message||void 0===t.kb_page_output?i=t.message?t.message:_("",epkb_vars.reload_try_again,"error"):(i=t.message,"main_page"==a?(e("#epkb-main-page-content").html(t.kb_page_output),e("#epkb-main-page-content").trigger("main_content_changed")):(e("#epkb-article-page-content").html(t.kb_page_output),e("#epkb-article-page-content").trigger("article_content_changed")))}).fail(function(e,a,t){i=t?" ["+t+"]":epkb_vars.unknown_error,i=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,i,"error")}).always(function(){g("remove",""),i&&(e(".eckb-bottom-notice-message").replaceWith(i),e("html, body").animate({scrollTop:0},"slow"))})}}function r(a,t,n,o){if((o=o||"").error||void 0===o.message||void 0===o.article_style_tab_output||void 0===o.article_colors_tab_output)return o.message?o.message:_("",epkb_vars.reload_try_again,"error");"NONE"!=o.kb_mega_menu&&a&&(e("#epkb-admin-mega-menu").html(o.kb_mega_menu),h.page_switching("epkb-article-page")),e("#epkb-article-page-content").html(o.article_page_output),e("#epkb-article-page-content").trigger("article_content_changed"),"NONE"!=o.article_style_tab_output&&e("#epkb-config-article-styles-sidebar").replaceWith(o.article_style_tab_output),"NONE"!=o.article_ordering_output&&e("#epkb-config-article-ordering-sidebar").replaceWith(o.article_ordering_output),"NONE"!=o.article_colors_tab_output&&e("#epkb-config-article-colors-sidebar").replaceWith(o.article_colors_tab_output),"NONE"!=o.article_text_tab_output&&e("#epkb-config-article-text-sidebar").replaceWith(o.article_text_tab_output),o.article_general_tab_output&&e("#epkb-config-article-general-sidebar").replaceWith(o.article_general_tab_output),"advanced_search_box_style"==t&&e("#epkb-config-text-sidebar").replaceWith(o.main_page_text_output);var r=e("#kb_article_page_layout input[name=kb_article_page_layout]:checked").val();return u&&"Sidebar"==r&&c("article_page",i()),u=!1,""}function p(){m.find("[id*=_search_terms]").prop("readonly",!0),e("[id*=-search-kb]").prop("disabled",!0),e("#epkb-main-page-container").find("a").on("click",function(e){e.preventDefault()}),e("#eckb-article-page-container").find("a").on("click",function(e){e.preventDefault()}),e("#eckb-article-page-container-v2").find("a").on("click",function(e){e.preventDefault()}),e(".epkb-navigation-button").attr("onclick","").unbind("click")}function s(){e(".eckb-no-kb-template-message").remove();var a=e(".epkb-archive-page-template-config");"kb_templates"===m.find("#templates_for_kb input[name=templates_for_kb]:checked").val()?(m.find(a).show(),m.find("#eckb-mm-arch-links-setup-list section").show(),m.find("#eckb-mm-arch-links-alltext-list section").show(),e(".eckb-no-kb-template-message").remove()):(m.find("#eckb-mm-arch-links-setup-list").append('<p class="eckb-no-kb-template-message">'+epkb_vars.archive_page+"</p>"),m.find("#eckb-mm-arch-links-setup-list section").hide(),m.find("#eckb-mm-arch-links-alltext-list section").hide())}function l(){var a=e(".epkb-nav-tabs li"),t=0;e("#epkb-content-container").find(a).each(function(){var a=e(this).outerHeight(!0);a>t&&(t=a)}),e("#epkb-content-container").find(a).css("min-height",t)}function b(e){e.parents(".radio-buttons-vertical").find(".input_container").removeClass("checked-radio"),e.attr("checked")&&e.parent().addClass("checked-radio")}function k(a,t){var i={};return e.each(e("input[id^="+a+"]").serializeArray(),function(e,a){i[a.name]=a.value}),void 0===i[t]?"":i[t]}function d(a){"show"===a&&e("#epkb-admin-mega-menu").css("display","flex"),"hide"===a&&e("#epkb-admin-mega-menu").css("display","none")}function _(e,a,t){return'<div class="eckb-bottom-notice-message"><div class="contents"><span class="'+t+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+'</span></div><div class="epkb-close-notice epkbfa epkbfa-window-close"></div></div>'}function g(a,t){if("show"===a){let a='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(t?'<div class="<div class="epkb-admin-dbl-text">'+t+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(a)}else"remove"===a&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}var m=e("#ekb-admin-page-wrap"),u=!1,f=!1;e("#epkb-main-page-settings").on("change","#categories_display_sequence, #articles_display_sequence",function(a){a.preventDefault(),e("#epkb-article-page-button").hasClass("epkb-active-page")?c("article_page",n()):c("main_page",i())}),e("#epkb-main-page-content").bind("main_content_changed",function(){l(),a(),p()}),e("#epkb-article-page-content").bind("article_content_changed",function(){p(),a()}),s(),e("#epkb-list-of-kbs").on("change",function(a){var t=e(this).find(":selected").data("kb-admin-url");t&&(window.location.href=t)}),e("#epkb-config-main-info").find(".page-icon").on("click",function(){s(),e(".eckb-bottom-notice-message").html(""),e(".option-info-icon").removeClass("active-info"),e(".option-info-content").addClass("hidden"),e("#epkb-main-page").show(),e("#epkb-article-page").show(),e(".epkb-info-section").removeClass("epkb-active-page"),e(this).parent().parent().toggleClass("epkb-active-page"),e(".epkb-config-content").hide(),e(".epkb-wizards").hide(),e(".epkb-advanced-config").hide(),e(".epkb-config-sidebar").removeClass("open-menu"),e("#epkb-article-page-settings").hide(),e("#epkb-main-page-settings").hide(),e("#epkb-archive-page-settings").hide(),e(".config-option-group").removeClass("epkb-mm-active"),e(".epkb-mega-menu-toggle").show();var t=e(this).attr("id"),o=e("#kb_article_page_layout input[name=kb_article_page_layout]:checked").val();if(h.page_switching(t),e("#"+t+"-content").fadeToggle(),e("#epkb-configuration-old-message").hide(),"epkb-main-page"==t){e("#epkb-main-page-settings").show(),e(".epkb-info-save").show(),e(".epkb-demo-data-button").show(),e("#epkb-configuration-old-message").show(),a(),e("#epkb-main-page-content").show(),e(window).resize();"kb_templates"==(r=e("#templates_for_kb input[name=templates_for_kb]:checked").val())&&e(".eckb-mm-mp-links-setup-main-template-content").addClass("epkb-mm-active"),u&&"Sidebar"==o&&(u=!1,f=!0,c("main_page",n()),f=!1)}else if("epkb-article-page"==t){var r=e("#templates_for_kb input[name=templates_for_kb]:checked").val();"kb_templates"==r&&e(".eckb-mm-mp-links-setup-article-template-content").addClass("epkb-mm-active"),e("#epkb-article-page-settings").show(),e(".epkb-info-save").show(),e(".epkb-demo-data-button").show(),e("#epkb-configuration-old-message").show(),a(),0===e("#epkb-article-page-content").html().trim().length&&C("layout",o),e("#epkb-article-page-content").show(),u&&"Sidebar"==o&&c("article_page",i()),u="Article"==o&&u,"Categories"==e("input[name=kb_main_page_layout]:checked").val()?(e(".eckb-mm-ap-links-tuning-articlecommonpath-configuration--category_template-content").removeClass("hidden"),e("#eckb-mm-ap-links-tuning-articlestructure-setup").closest("section").show()):(e(".eckb-mm-ap-links-tuning-articlecommonpath-configuration--category_template-content").addClass("hidden"),e("#eckb-mm-ap-links-tuning-articlestructure-setup").closest("section").hide());let t="";e("input[name=kb_main_page_layout]:checked").length?t=e("input[name=kb_main_page_layout]:checked").val():e("#article_toc_position_group").hasClass("Categories")&&(t="Categories"),"Categories"==t?(e("#article_toc_position1").prop("checked",!0),e("#article_toc_position1").closest("li").addClass("checked-radio"),e("#article_toc_position0").closest("li").addClass("radio-buttons-disabled"),e("#article_toc_position0").prop("disabled","disabled")):(e("#article_toc_position li").removeClass("radio-buttons-disabled"),e("#article_toc_position").find("input").prop("disabled",!1))}else"epkb-archive-page"==t?(e(".epkb-info-save").show(),e("#epkb-archive-page-settings").show()):"epkb-config-overview"==t?(e(".epkb-info-save").hide(),e(".epkb-mega-menu-toggle").hide(),e(".epkb-demo-data-button").hide()):"epkb-config-wizards"==t?(e(".epkb-info-save").hide(),e("#epkb-admin-mega-menu").hide(),e(".epkb-mega-menu-toggle").hide(),e(".epkb-demo-data-button").hide()):"epkb-config-advanced-config"==t&&(e(".epkb-info-save").show(),e("#epkb-admin-mega-menu").hide(),e(".epkb-mega-menu-toggle").hide())}),e(".epkb-demo-data-button").on("click",".ep_font_icon_info",function(){e(this).toggleClass("active-info"),e(".epkb-demo-info-content").toggleClass("hidden")});var h={general:function(){e("#epkb-config-main-info .epkb-setting-icon").on("click",function(){e(this).parent().parent().toggleClass("epkb-active-page")}),e("#epkb-admin-mega-menu").on("click",".epkb-mm-sidebar li",function(){e(".epkb-mm-sidebar li").removeClass("epkb-mm-active"),e(".epkb-mm-links li").removeClass("active-link"),e(this).addClass("epkb-mm-active"),e(".epkb-mm-content .epkb-mm-links").removeClass("epkb-mm-active"),e(".config-option-group").removeClass("epkb-mm-active");var t=e(this).attr("id");if(e(".epkb-mm-content").find("#"+t+"-list").addClass("epkb-mm-active"),"eckb-mm-mp-links-organize"==t)e(".eckb-mm-mp-links-organize--organize-content").addClass("epkb-mm-active"),e("#epkb-config-ordering-sidebar").show(),e("#epkb-main-page-content #elay-grid-layout-page-container").length&&e(".epkb-grid-option-hide-show").hide();else if("eckb-mm-ap-links-organize"==t)e(".eckb-mm-mp-links-organize--organize-content").addClass("epkb-mm-active"),e("#epkb-config-ordering-sidebar").show(),e("#epkb-main-page-settings").show(),e("#epkb-main-page-content #elay-grid-layout-page-container").length&&e(".epkb-grid-option-hide-show").show();else if("eckb-mm-mp-links-setup"==t){"kb_templates"==e("#templates_for_kb input[name=templates_for_kb]:checked").val()&&e(".eckb-mm-mp-links-setup-main-template-content").addClass("epkb-mm-active")}a()}),e("#epkb-admin-mega-menu").on("click",".epkb-mm-links li",function(){var a=e(this).parents(".epkb-mm-links").attr("id");if("eckb-mm-mp-links-setup-list"!==a&&"eckb-mm-ap-links-setup-list"!==a){e(".epkb-mm-links li").removeClass("active-link"),e(this).addClass("active-link"),e(".config-option-group").removeClass("epkb-mm-active");var t=e(this).attr("id");e(".epkb-config-sidebar").find("."+t+"-content").addClass("epkb-mm-active")}}),e("#epkb-admin-mega-menu").on("click",".epkb-close-mm",function(){e(".epkb-open-mm").show(),e("#epkb-admin-mega-menu").slideUp(600)}),e(".epkb-open-mm").on("click",function(){e(this).hide(),e("#epkb-admin-mega-menu").slideDown(600)}),e("#epkb-admin-mega-menu").on("click","#templates_for_kb_group",function(){s(),e(".config-option-group").removeClass("epkb-mm-active");"kb_templates"==e("#templates_for_kb input[name=templates_for_kb]:checked").val()&&e(".eckb-mm-mp-links-setup-main-template-content").addClass("epkb-mm-active")})},page_switching:function(a){return e(".epkb-open-mm").hide(),"epkb-main-page"===a?(d("show"),e(".epkb-mm-links").removeClass("epkb-mm-active"),e("#eckb-mm-mp-links").show(),e("#eckb-mm-ap-links").hide(),e("#eckb-mm-arch-links").hide(),e("#eckb-mm-mp-links li").removeClass("epkb-mm-active"),e("#eckb-mm-mp-links-setup").addClass("epkb-mm-active"),e("#eckb-mm-mp-links-setup-list").addClass("epkb-mm-active"),e("#eckb-mm-ap-links-setup-list").removeClass("epkb-mm-active")):"epkb-article-page"===a?(d("show"),e(".epkb-mm-links").removeClass("epkb-mm-active"),e("#eckb-mm-ap-links").show(),e("#eckb-mm-mp-links").hide(),e("#eckb-mm-arch-links").hide(),e("#eckb-mm-ap-links li").removeClass("epkb-mm-active"),e("#eckb-mm-ap-links-setup").addClass("epkb-mm-active"),e("#eckb-mm-ap-links-setup-list").addClass("epkb-mm-active"),e("#eckb-mm-mp-links-setup-list").removeClass("epkb-mm-active")):"epkb-config-overview"===a?e("#epkb-admin-mega-menu").hide():"epkb-archive-page"===a?(d("show"),e(".epkb-mm-links").removeClass("epkb-mm-active"),e("#eckb-mm-arch-links li").removeClass("epkb-mm-active"),e("#eckb-mm-arch-links-setup-list").addClass("epkb-mm-active"),e("#eckb-mm-arch-links-setup").addClass("epkb-mm-active"),e("#eckb-mm-arch-links").show(),e("#eckb-mm-ap-links").hide(),e("#eckb-mm-mp-links").hide()):"epkb-config-wizards"===a&&e("#epkb-admin-mega-menu").hide(),this},drag_drop:function(){e("#epkb-admin-mega-menu").on("click","#eckb-mm-mp-links-organize, #eckb-mm-ap-links-organize",function(){e(".epkb-section-container").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".epkb-nav-tabs").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".epkb-panel-container ").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".eckb-categories-list").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".sidebar-sections").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500)})}};h.general(),h.drag_drop(),e("#epkb_cancel_config, #epkb_cancel_dashboard").on("click",function(){location.reload()}),e("#epkb-main-page-button").hasClass("epkb-active-page")||e("#epkb-article-page-button").hasClass("epkb-active-page")?e(".epkb-info-save").show():e(".epkb-demo-data-button").hide(),e("#templates_for_kb_group").find(":radio").on("click",function(){b(e(this))}),e("[id*=-search-toggle]").on("click",function(){e("#epkb-article-page-content").find("[id*=-search-toggle]").slideToggle()}),e("#ekb-admin-page-wrap").find("[id*=_search_terms]").prop("readonly",!0),e("[id*=-search-kb]").prop("disabled",!0),e("#kb_name").on("keyup",function(){var a=25-e(this).val().length;e("#character_value").remove(),a<0&&e(this).after('<div id="character_value" class="input_error"><p>'+epkb_vars.reduce_name_size+"</p></div>")}),m.on("click",".epkb-info",function(){e(this).parent().toggleClass("epkb-preview-active-info"),e(this).parent().find(".epkb-preview-information").slideToggle(),e(this).parent().next().css("opacity",".2"),e(this).parent().hasClass("epkb-preview-active-info")||e(this).parent().next().css("opacity","1")});{e("#epkb-config-config").on("change",function(e){void 0!==e.target.id&&(e.target.id.includes("reset_style")||e.target.id.match("^categories_display_sequence")||e.target.id.match("^articles_display_sequence")||e.target.id.match("^epkb-layout-preview-data")||e.target.id.match("^kb_main_page_layout")||e.target.id.match("^kb_article_page_layout")||e.target.id.match("grid_category_icon*")||e.target.id.match("article_common_path*")||e.target.id.match("kb_articles_common_path")||"section_head_category_icon_location"!==e.target.id&&"section_head_category_icon_size"!==e.target.id)||(e.preventDefault(),e.stopPropagation())}),e("body").on("click",".epkb-update-preview-button",function(a){a.preventDefault(),a.stopPropagation(),e(this).removeClass("active"),v()});function v(){if(e(".epkb_update_preview").length<1)return;let a=e(".epkb_update_preview").clone();e(".epkb_update_preview").remove();var t,i=e("#epkb-article-page-button").hasClass("epkb-active-page"),n={action:"epkb_change_one_config_param_ajax",epkb_kb_id:e("#epkb_config_kb_id").val(),form:e("#epkb-config-config").serialize(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),epkb_is_article_icon_active:i};e.ajax({type:"POST",dataType:"json",data:n,url:ajaxurl,beforeSend:function(e){g("show","Loading Preview")}}).done(function(n){(n=n||"").error||void 0===n.message||void 0===n.kb_info_panel_output?t=n.message?n.message:_("",epkb_vars.reload_try_again,"error"):i?(e("#epkb-article-page-content").html(n.kb_info_panel_output),e("#epkb-article-page-content").trigger("article_content_changed"),e("#epkb-article-page-content").prepend(a)):(e("#epkb-main-page-content").html(n.kb_info_panel_output),e("#epkb-main-page-content").trigger("main_content_changed"),e("#epkb-main-page-content").prepend(a))}).fail(function(e,a,i){t=i?" ["+i+"]":epkb_vars.unknown_error,t=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,t,"error")}).always(function(){g("remove",""),t&&(e(".eckb-bottom-notice-message").replaceWith(t),e("html, body").animate({scrollTop:0},"slow"))})}var y={done:function(e,a){},change:function(a,t){e(a.target).trigger("color_changed")},clear:function(a,t){let i=e(a.target).closest(".input_container").find(".wp-picker-input-wrap label input[type=text]");i.length<1||void 0!==i.data("default_color")&&i.iris("color",i.data("default_color"))}};e(".ekb-color-picker input").wpColorPicker(y),e(".epkb-config-sidebar").find(":radio").on("click",function(){b(e(this))}),p(),e(".epkb-sidebar-container").on("click",".option-info-icon",function(a){a.preventDefault();var t=e(this).parents(".config-option-group").find(".option-info-content").hasClass("hidden");e(".option-info-icon").removeClass("active-info"),e(".option-info-content").addClass("hidden");e(this).parents(".epkb-sidebar-container").position();t&&(e(this).addClass("active-info"),e(this).parents(".config-option-group").find(".option-info-content").removeClass("hidden"),e(this).parents(".config-option-group").find(".option-info-content").css({bottom:0,right:e(".epkb-sidebar-container").outerWidth(!0)+20,"max-height":"90vh"}))})}{e("#epkb-config-main-info").on("change","#epkb-layout-preview-data",function(e){e.preventDefault(),w("demo","demo"),C("demo","demo")}),e("#epkb-admin-mega-menu").on("change","#kb_main_page_layout :input",function(a){a.preventDefault(),u=!1,e("#kb_main_page_layout").val(a.target.value);var t=a.target.value;e("#kb_main_page_layout input[name=kb_main_page_layout]").blur(),"Grid"===t?e("#kb_main_page_category_link_group").show():e("#kb_main_page_category_link_group").hide(),w("layout",t)}),e("#epkb-admin-mega-menu").on("change","#main_page_reset_style :input",function(a){a.preventDefault();var t=a.target.value;e("#main_page_reset_style input[name=main_page_reset_style]").prop("checked",!1),w("style",t)}),e("#epkb-admin-mega-menu").on("change","#main_page_reset_search_box_style :input",function(a){a.preventDefault();var t=a.target.value;e("#main_page_reset_search_box_style input[name=main_page_reset_search_box_style]").prop("checked",!1),w("advanced_search_box_style",t)}),e("#epkb-admin-mega-menu").on("click","#main_page_reset_colors :button",function(a){a.preventDefault();var t=a.target.value;e("#main_page_reset_colors input[name=reset_colors]").prop("checked",!1),w("colors",t)});function w(a,t){var i,n={action:"epkb_change_main_page_config_ajax",epkb_kb_id:e("#epkb_config_kb_id").val(),target_type:a,target_name:t,epkb_chosen_main_page_layout:e("#kb_main_page_layout input[name=kb_main_page_layout]:checked").val(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),form:e("#epkb-config-config").serialize()};e.ajax({type:"POST",dataType:"json",data:n,url:ajaxurl,beforeSend:function(e){g("show","Loading..")}}).done(function(t){(t=t||"").error||void 0===t.message||void 0===t.style_tab_output||void 0===t.colors_tab_output||void 0===t.kb_main_page_output?i=t.message?t.message:_("",epkb_vars.reload_try_again,"error"):(i=t.message,e("#epkb-main-page-content").html(t.kb_main_page_output),e("#epkb-main-page-content").trigger("main_content_changed"),"layout"==a&&(e("#epkb-admin-mega-menu").html(t.kb_mega_menu),h.page_switching("epkb-main-page"),e("#epkb-article-page-content").html(t.article_page_output),e("#epkb-article-page-content").trigger("article_content_changed"),t.ordering_output&&e("#epkb-config-ordering-sidebar").replaceWith(t.ordering_output),t.overview_page_output&&e("#epkb-config-overview-content").html(t.overview_page_output),t.main_page_text_output&&e("#epkb-config-text-sidebar").replaceWith(t.main_page_text_output),r(!1,a,t.article_page_layout,t)),"NONE"!=t.style_tab_output&&e("#epkb-config-styles-sidebar").replaceWith(t.style_tab_output),"NONE"!=t.colors_tab_output&&e("#epkb-config-colors-sidebar").replaceWith(t.colors_tab_output),"advanced_search_box_style"==a&&e("#epkb-config-text-sidebar").replaceWith(t.main_page_text_output))}).fail(function(e,a,t){i=t?" ["+t+"]":epkb_vars.unknown_error,i=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,i,"error")}).always(function(){g("remove",""),0==e("#epkb-config-colors-sidebar .wp-picker-container").length&&e("#epkb-config-colors-sidebar .ekb-color-picker input").wpColorPicker(),0==e("#epkb-config-article-colors-sidebar .wp-picker-container").length&&e("#epkb-config-article-colors-sidebar .ekb-color-picker input").wpColorPicker();let a=e("#epkb-search-kb").text();e("#epkb-search-kb").text(a),a=e("#grid-elay-search-kb").text(),e("#grid-elay-search-kb").text(a),i&&(e(".eckb-bottom-notice-message").replaceWith(i),e("html, body").animate({scrollTop:0},"slow"))})}}{e("#eckb-mm-ap-links-setup-list").on("change","#kb_article_page_layout_group",function(a){a.preventDefault();var t=a.target.value;e("#kb_article_page_layout").val(a.target.value),e(".config-option-group").removeClass("epkb-mm-active"),e("#kb_article_page_layout input[name=kb_article_page_layout]").blur(),C("layout",t)}),e("body").on("change","#article_page_reset_style :input",function(a){a.preventDefault();var t=a.target.value;e("#article_page_reset_style input[name=article_page_reset_style]").prop("checked",!1),C("style",t)}),e("body").on("change","#article_page_reset_search_box_style :input",function(a){a.preventDefault();var t=a.target.value;e("#article_page_reset_search_box_style input[name=article_page_reset_search_box_style]").prop("checked",!1),C("advanced_search_box_style",t)}),e("body").on("click","#article_page_reset_colors :button",function(a){a.preventDefault();var t=a.target.value;e("#reset_colors input[name=reset_colors]").prop("checked",!1),C("colors",t)});function C(a,t){var i,n={action:"epkb_change_article_page_config_ajax",epkb_kb_id:e("#epkb_config_kb_id").val(),target_type:a,target_name:t,epkb_chosen_main_page_layout:e("#kb_main_page_layout input[name=kb_main_page_layout]:checked").val(),epkb_chosen_article_page_layout:e("#kb_article_page_layout input[name=kb_article_page_layout]:checked").val(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),form:e("#epkb-config-config").serialize()};e.ajax({type:"POST",dataType:"json",data:n,url:ajaxurl,beforeSend:function(e){g("show","Loading..")}}).done(function(e){var t=r(!0,a,0,e);i=t.length>0?t:e.message}).fail(function(e,a,t){i=t?" ["+t+"]":epkb_vars.unknown_error,i=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,i,"error")}).always(function(){g("remove",""),0==e("#epkb-config-article-colors-sidebar .wp-picker-container").length&&e("#epkb-config-article-colors-sidebar .ekb-color-picker input").wpColorPicker(),i&&(e(".eckb-bottom-notice-message").replaceWith(i),e("html, body").animate({scrollTop:0},"slow"))})}e("body").on("click",".epkb_art_common_path_button",function(a){e("#epkb_common_path_changed").val("yes")})}e("#epkb_save_kb_config, #epkb_save_dashboard").on("click",function(a){if(e("#epkb-config-advanced-config").parents(".epkb-active-page").length)return function(){var a="",t={action:"epkb_save_kb_advanced_config_changes",_wpnonce_epkb_save_kb_config:e("#_wpnonce_epkb_save_kb_config").val(),epkb_kb_id:e("#epkb_config_kb_id").val(),advanced_form:e("#epkb-config-config4").serialize()};e.ajax({type:"POST",dataType:"json",data:t,url:ajaxurl,beforeSend:function(e){g("show","Saving Changes")}}).done(function(e){a=(e=e||"").error||void 0===e.message?e.message?e.message:_("",epkb_vars.reload_try_again,"error"):e.message}).fail(function(e,t,i){a=i?" ["+i+"]":epkb_vars.unknown_error,a=_(epkb_vars.not_saved+" "+epkb_vars.msg_try_again,a,"error")}).always(function(){g("remove",""),a&&(e(".eckb-bottom-notice-message").replaceWith(a),e("html, body").animate({scrollTop:0},"slow"))})}(),!1;a.preventDefault();var t="",c=e("#kb_article_page_layout input[name=kb_article_page_layout]:checked").val(),r=e("#epkb-article-page-button").hasClass("epkb-active-page")&&"Sidebar"===c?n():i(),p={action:"epkb_save_kb_config_changes",_wpnonce_epkb_save_kb_config:e("#_wpnonce_epkb_save_kb_config").val(),epkb_kb_id:e("#epkb_config_kb_id").val(),form:e("#epkb-config-config, #epkb-config-config2, #epkb-config-config3").serialize(),advanced_form:e("#epkb-config-config4").serialize(),epkb_new_sequence:r,top_cat_sequence:o()};e.ajax({type:"POST",dataType:"json",data:p,url:ajaxurl,beforeSend:function(e){g("show","Saving...")}}).done(function(a){if((a=a||"").error||void 0===a.message)t=a.message?a.message:_("",epkb_vars.reload_try_again,"error");else if(t=a.message,e("#epkb-content-container").find(".epkb-sortable-item-highlight").each(function(a,t){e(this).removeClass("epkb-sortable-item-highlight")}),t.indexOf("RELOAD")>=0){e(".eckb-bottom-notice-message").replaceWith(t),t="",e("html, body").animate({scrollTop:0},"slow"),window.setTimeout(i,2e3);function i(){location.reload()}}}).fail(function(e,a,i){t=i?" ["+i+"]":epkb_vars.unknown_error,t=_(epkb_vars.not_saved+" "+epkb_vars.msg_try_again,t,"error")}).always(function(){g("remove",""),t&&(e(".eckb-bottom-notice-message").replaceWith(t),e("html, body").animate({scrollTop:0},"slow"))})}),e("#epkb_save_wpml_settings").on("click",function(a){a.preventDefault();var t="",i={action:"epkb_save_wpml_settings",_wpnonce_epkb_save_wpml_settings:e("#_wpnonce_epkb_save_wpml_settings").val(),epkb_kb_id:e("#epkb_config_kb_id").val(),epkb_wpml_is_enabled:e("#epkb_wpml_is_enabled").is(":checked")};e.ajax({type:"POST",dataType:"json",data:i,url:ajaxurl,beforeSend:function(e){g("show","Saving..")}}).done(function(e){t=(e=e||"").error||void 0===e.message?e.message?e.message:_("",epkb_vars.reload_try_again,"error"):e.message}).fail(function(e,a,i){t=i?" ["+i+"]":epkb_vars.unknown_error,t=_(epkb_vars.not_saved+" "+epkb_vars.msg_try_again,t,"error")}).always(function(){g("remove",""),t&&(e(".eckb-bottom-notice-message").replaceWith(t),e("html, body").animate({scrollTop:0},"slow"))})}),l(),e("#epkb-config-main-info").on("click",".epkb-info-pages",function(){l()}),e("#epkb-main-page-content, .epkb-wizard-ordering-ordering-preview, .epkb-wizard-theme-preview, #eckb-wizard-main-page-preview").on("click",".epkb_top_categories",function(){e(this).parent().find("li").removeClass("active"),e(this).addClass("active"),e("#epkb-main-page-container, .epkb-wizard-ordering-ordering-preview").find(".epkb-tab-panel").removeClass("active"),e(".epkb-panel-container ."+e(this).attr("id")).addClass("active")}),e("#epkb-main-page-content, .epkb-wc-step-panel").on("click",".epkb-section-body .epkb-category-level-2-3",function(){function a(e){t.hasClass(e[0])?(t.removeClass(e[0]),t.addClass(e[1])):t.hasClass(e[1])&&(t.removeClass(e[1]),t.addClass(e[0]))}var t=e(this).find("i");a(["ep_font_icon_plus","ep_font_icon_minus"]),a(["ep_font_icon_plus_box","ep_font_icon_minus_box"]),a(["ep_font_icon_right_arrow","ep_font_icon_down_arrow"]),a(["ep_font_icon_arrow_carrot_right","ep_font_icon_arrow_carrot_down"]),a(["ep_font_icon_arrow_carrot_right_circle","ep_font_icon_arrow_carrot_down_circle"]),a(["ep_font_icon_folder_add","ep_font_icon_folder_open"])}),e("#epkb-main-page-content, .epkb-wc-step-panel").on("click",".epkb-section-body .epkb-category-level-2-3",function(){e(this).parent().children("ul").toggleClass("active")}),e("#epkb-main-page-content").on("click",".epkb-show-all-articles",function(){e(this).toggleClass("active");var a=e(this).parent("ul").find("li");e(this).hasClass("active")?(e(this).find(".epkb-show-text").addClass("epkb-hide-elem"),e(this).find(".epkb-hide-text").removeClass("epkb-hide-elem")):(e(this).find(".epkb-show-text").removeClass("epkb-hide-elem"),e(this).find(".epkb-hide-text").addClass("epkb-hide-elem")),e(a).each(function(){e(this).hasClass("epkb-hide-elem")?(e(this).removeClass("epkb-hide-elem"),e(this).addClass("visible")):e(this).hasClass("visible")&&(e(this).removeClass("visible"),e(this).addClass("epkb-hide-elem"))})}),e("#epkb-content-container").find("[id^=section_head_category_icon]").attr("disabled",!0);var x;e(document).ajaxComplete(function(){clearTimeout(x),x=setTimeout(function(){e("body").find(".eckb-bottom-notice-message").addClass("fadeOutDown")},1e4),e("body").find(".eckb-bottom-notice-message").on("click",".epkb-close-notice",function(){e(this).parent().addClass("fadeOutUp")}),e(".epkb-config-sidebar, #mega-menu-main-page-layout").find(":radio").on("click",function(){b(e(this))}),e(".epkb-config-sidebar, #mega-menu-main-page-layout").find(":radio").each(function(){b(e(this))}),e("#templates_for_kb_group").find(":radio").on("click",function(){b(e(this))})}),e("#eckb-hidden-wp-editor-container")&&"undefined"!=typeof tinyMCE&&(tinyMCE.init({selector:"#sidebar_main_page_intro_text_eckb_editor"}),e("#epkb-main-page-settings, .epkb-wizard-text-selection-container").on("click","#eckb-wp-editor-update",function(){e("#eckb-hidden-wp-editor-container").addClass("eckb-popup").show()}),e("#eckb-hidden-wp-editor-container").on("click","#eckb-popup-ok-button",function(){e("#wp-sidebar_main_page_intro_text_eckb_editor-wrap").hasClass("html-active")&&e(".switch-tmce").trigger("click"),e("#eckb-hidden-wp-editor-container").removeClass("eckb-popup").hide();var a=void 0===e("#eckb-hidden-wp-editor-container").find("textarea").attr("id")?"":e("#eckb-hidden-wp-editor-container").find("textarea").attr("id");if(void 0!==tinyMCE.activeEditor&&0!=a.length){var t=tinyMCE.activeEditor.getContent(),i="#"+a.replace("_eckb_editor","");void 0!==e(i)&&(e(i).val(t),e(i).html(t),e(i).trigger("change")),v()}}),e("#eckb-hidden-wp-editor-container").on("click","#eckb-popup-cancel-button",function(){e("#eckb-hidden-wp-editor-container").removeClass("eckb-popup").hide()})),e(".epkb-config-container").on("click",".overview-toggle",function(a){e(this).parents(".overview-info-section").find(".overview-content").slideToggle()});window.location.search.toLowerCase().indexOf("ekb-main-page")>=0&&e("#epkb-main-page").trigger("click"),e("#epkb-config-open-old, #show-old-config").click(function(){return e(".epkb-info-old").show(),e(this).closest(".epkb-info-section").hide(),e("#epkb-main-page").click(),!1})});