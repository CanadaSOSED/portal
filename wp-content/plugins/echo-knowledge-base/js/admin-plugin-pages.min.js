jQuery(document).ready(function(r){var e,t,c=r("#ekb-admin-page-wrap");function a(a,n){c.find(a+" > .nav_tab").on("click",function(){c.find(a+" > .nav_tab").removeClass("active"),r(this).addClass("active"),c.find(n+" > .ekb-admin-page-tab-panel").removeClass("active");var e=r(this).index()+1;c.find(n+" > .ekb-admin-page-tab-panel:nth-child( "+e+" ) ").addClass("active")})}r("#epkb-list-of-kbs").on("change",function(e){var a=r(this).find(":selected").data("kb-admin-url");a&&(window.location.href=a)}),a(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),a(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),a("#help_tabs_nav","#help_tab_panel"),c.find("#epkb_send_feedback").on("click",function(e){c.find(".required").remove(),r(".eckb-top-notice-message").html(""),e.preventDefault();var a=c.find("#your_feedback").val().trim(),n=c.find("#your_email").val().trim(),i=c.find("#your_name").val().trim(),o=!0;if(a||(c.find("#your_feedback").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),o=!1),n||(c.find("#your_email").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),o=!1),i||(c.find("#your_name").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),o=!1),0!=o){var t,s={action:"epkb_send_feedback",_wpnonce_epkb_send_feedback:r("#_wpnonce_epkb_send_feedback").val(),email:n,name:i,feedback:a};r.ajax({type:"POST",dataType:"json",data:s,url:ajaxurl,beforeSend:function(e){r("#epkb-ajax-in-progress").text(epkb_vars.sending_feedback).dialog("open")}}).done(function(e){t=(e=e||"").error||void 0===e.message?e.message?e.message:d("",epkb_vars.reload_try_again,"error"):e.message}).fail(function(e,a,n){t=n?" ["+n+"]":epkb_vars.unknown_error,t=d(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,t,"error")}).always(function(){r("#epkb-ajax-in-progress").dialog("close"),t&&(r(".eckb-top-notice-message").replaceWith(t),r("html, body").animate({scrollTop:0},"slow"))})}}),c.find(".ekb-feedback-btn").on("click",function(){c.find(".ekb-feedback-btn").removeClass("ekb-feedback-btn-active"),r(this).addClass("ekb-feedback-btn-active"),"feature-request"===r(this).attr("id")&&c.find("#epkb_feedback_form").show()}),c.find("#epkb_toggle_debug").on("click",function(){r(".eckb-top-notice-message").html("");var i,e={action:"epkb_toggle_debug",_wpnonce_epkb_toggle_debug:r("#_wpnonce_epkb_toggle_debug").val()};r.ajax({type:"POST",dataType:"json",url:ajaxurl,data:e,beforeSend:function(e){r("#epkb-ajax-in-progress").text(epkb_vars.changing_debug).dialog("open")}}).done(function(e){(e=e||"").error||void 0===e.message?i=e.message?e.message:d("",epkb_vars.reload_try_again,"error"):window.location.href=window.location.href+"&info_tab=debug"}).fail(function(e,a,n){i=n?" ["+n+"]":epkb_vars.unknown_error,i=d(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,i,"error")}).always(function(){r("#epkb-ajax-in-progress").dialog("close"),i&&(r(".eckb-top-notice-message").replaceWith(i),r("html, body").animate({scrollTop:0},"slow"))})}),c.find(".featured_img").on("click",function(e){var a;e.preventDefault(),e.stopPropagation(),c.find(".image_zoom").remove();var n=r(this).find("img");a=1<n.length?r(n[0]).is(":visible")?r(n[0]).attr("src"):r(n[1]).is(":visible")?r(n[1]).attr("src"):r(n[2]).attr("src"):r(this).find("img").attr("src"),r(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+a+'" class="image_zoom"><span class="close icon_close"></span></div>'),r("html, body").bind("click.epkb",function(){r("#epkb_image_zoom").remove(),r("html, body").unbind("click.epkb")})}),r("#kb_name").on("keyup",function(){var e=25-r(this).val().length;r("#character_value").remove(),e<0&&r(this).after('<div id="character_value" class="input_error"><p>'+epkb_vars.reduce_name_size+"</p></div>")}),r("#add_on_panels").on("click",".ep_font_icon_info",function(){r(this).parent().find(".ep_font_icon_info_content").toggle()}),0<r(".eckb-bottom-notice-message").length&&(clearTimeout(e),e=setTimeout(function(){var e=r("body").find(".eckb-bottom-notice-message");e.length&&e.addClass("fadeOutDown")},1e4)),r("body").find(".epkb-close-notice").on("click",function(){r(this).parent().addClass("fadeOutDown")}),t=r("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){r(this).dialog("close")}},close:function(){r("#epkb-dialog-info-icon-msg").html()}}),c.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var e=!1,a="",n=r(this).parent().find(".label").text();n=n||"";var i=r(this).find("p").html();if(i){var o=i.split("@");i=o[0]?o[0]:epkb_vars.help_text_coming,o[1]&&(e=!0,a='<img class="epkb-help-image" src="'+o[1]+'">')}else i=epkb_vars.help_text_coming;r("#epkb-dialog-info-icon-msg").html("<p>"+i+"</p><br/>"+a),t.dialog({title:n,width:e?1e3:400,maxHeight:e?750:300,open:function(){r("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){t.dialog("option",{position:{my:"center",at:"center",of:window}})}),r(".ui-widget-overlay").bind("click",function(){r("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),r("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),r(".ui-dialog-titlebar").hide(),c.on("click",".eckb-tooltip-button",function(){r(this).parent().find(".eckb-tooltip-contents").fadeToggle()});var n=r(".epkb-analytics-container");function d(e,a,n){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+n+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+"</span></div></div>"}n.find(".page-icon").on("click",function(){n.find(".eckb-config-content").removeClass("epkb-active-content"),n.find(".eckb-nav-section").removeClass("epkb-active-nav");var e=r(this).attr("id");n.find("#"+e+"-content").addClass("epkb-active-content"),n.find(this).parents(".eckb-nav-section").addClass("epkb-active-nav")})});