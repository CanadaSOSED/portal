jQuery(document).ready(function(e){function a(a,t){if("show"===a){let a='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(t?'<div class="<div class="epkb-admin-dbl-text">'+t+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(a)}else"remove"===a&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function t(e,a,t){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+t+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+"</span></div></div>"}var i=e("#ekb-admin-page-wrap");e("#epkb-list-of-kbs").on("change",function(a){var t=e(this).find(":selected").data("kb-admin-url");t&&(window.location.href=t)}),function(){function a(a,t){i.find(a+" > .nav_tab").on("click",function(){i.find(a+" > .nav_tab").removeClass("active"),e(this).addClass("active"),i.find(t+" > .ekb-admin-page-tab-panel").removeClass("active");var n=e(this).index()+1;i.find(t+" > .ekb-admin-page-tab-panel:nth-child( "+n+" ) ").addClass("active")})}a(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),a(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),a("#help_tabs_nav","#help_tab_panel"),a("#new_features_tabs_nav","#new_features_tab_panel")}(),i.find("#epkb_toggle_debug").on("click",function(){e(".eckb-top-notice-message").html("");var i,n={action:"epkb_toggle_debug",_wpnonce_epkb_toggle_debug:e("#_wpnonce_epkb_toggle_debug").val()};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:n,beforeSend:function(e){a("show",epkb_vars.changing_debug)}}).done(function(e){(e=e||"").error||void 0===e.message?i=e.message?e.message:t("",epkb_vars.reload_try_again,"error"):window.location.href=window.location.href+"&epkb-tab=debug"}).fail(function(e,a,n){i=n?" ["+n+"]":epkb_vars.unknown_error,i=t(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,i,"error")}).always(function(){a("remove",""),i&&(e(".eckb-top-notice-message").replaceWith(i),e("html, body").animate({scrollTop:0},"slow"))})}),i.find(".featured_img").on("click",function(a){a.preventDefault(),a.stopPropagation(),i.find(".image_zoom").remove();var t,n=e(this).find("img");t=n.length>1?e(n[0]).is(":visible")?e(n[0]).attr("src"):e(n[1]).is(":visible")?e(n[1]).attr("src"):e(n[2]).attr("src"):e(this).find("img").attr("src"),e(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+t+'" class="image_zoom"><span class="close icon_close"></span></div>'),e("html, body").bind("click.epkb",function(){e("#epkb_image_zoom").remove(),e("html, body").unbind("click.epkb")})}),e("#add_on_panels").on("click",".ep_font_icon_info",function(){e(this).parent().find(".ep_font_icon_info_content").toggle()}),function(){var a;e(".eckb-bottom-notice-message").length>0&&(clearTimeout(a),a=setTimeout(function(){var a=e("body").find(".eckb-bottom-notice-message");a.length&&a.addClass("fadeOutDown")},1e4))}(),e("body").find(".epkb-close-notice").on("click",function(){e(this).parent().addClass("fadeOutDown")});var n=e("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){e(this).dialog("close")}},close:function(){e("#epkb-dialog-info-icon-msg").html()}});i.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var a=!1,t="",i=e(this).parent().find(".label").text();i=i||"";var o=e(this).find("p").html();if(o){var c=o.split("@");o=c[0]?c[0]:epkb_vars.help_text_coming,c[1]&&(a=!0,t='<img class="epkb-help-image" src="'+c[1]+'">')}else o=epkb_vars.help_text_coming;e("#epkb-dialog-info-icon-msg").html("<p>"+o+"</p><br/>"+t),n.dialog({title:i,width:a?1e3:400,maxHeight:a?750:300,open:function(){e("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){n.dialog("option",{position:{my:"center",at:"center",of:window}})}),e(".ui-widget-overlay").bind("click",function(){e("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),e("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),i.on("click",".eckb-tooltip-button",function(){e(this).parent().find(".eckb-tooltip-contents").fadeToggle()});var o=e(".epkb-analytics-container");if(o.find(".page-icon").on("click",function(){o.find(".eckb-config-content").removeClass("epkb-active-content"),o.find(".eckb-nav-section").removeClass("epkb-active-nav");var a=e(this).attr("id");o.find("#"+a+"-content").addClass("epkb-active-content"),o.find(this).parents(".eckb-nav-section").addClass("epkb-active-nav")}),e("body").on("click",".eckb-wizard-accordion .eckb-wizard-option-heading",function(){var a=e(this).closest(".eckb-wizard-accordion"),t=e(this).closest(".eckb-wizard-accordion__body-content"),i=t.hasClass("eckb-wizard-accordion__body-content--active");a.find(".eckb-wizard-accordion__body-content").removeClass("eckb-wizard-accordion__body-content--active"),i||t.addClass("eckb-wizard-accordion__body-content--active")}),e("body").on("click","#eckb-wizard-main-page-preview a, .epkb-wizard-theme-panel-container a, #eckb-wizard-article-page-preview a",!1),e(".epkb-categories-icons").length){e(".epkb-categories-icons__button").click(function(){if(!e(this).hasClass("epkb-categories-icons__button--active")){e(".epkb-categories-icons__button").removeClass("epkb-categories-icons__button--active"),e(this).addClass("epkb-categories-icons__button--active"),e(".epkb-categories-icons__tab-body").slideUp("fast");var a=e(this).data("type");e(".epkb-categories-icons__tab-body--"+a).length&&e(".epkb-categories-icons__tab-body--"+a).slideDown("fast"),e("#epkb_head_category_icon_type").val(a)}}),e(".epkb-icon-pack__icon").click(function(){e(".epkb-icon-pack__icon").removeClass("epkb-icon-pack__icon--checked"),e(this).addClass("epkb-icon-pack__icon--checked"),e("#epkb_head_category_icon_name").val(e(this).data("key"))}),e(".epkb-category-image__button").click(function(a){a.preventDefault();var t=e(this),i=wp.media({title:t.data("title"),library:{type:"image"},multiple:!1}).on("select",function(){var a=i.state().get("selection").first().toJSON();e("#epkb_head_category_icon_image").val(a.id),e(".epkb-category-image__button").removeClass("epkb-category-image__button--no-image"),e(".epkb-category-image__button").addClass("epkb-category-image__button--have-image"),e(".epkb-category-image__button").css({"background-image":"url("+a.url+")"})}).open()}),e("#parent").change(function(){var a,t,i=e(this),n=e("#epkb_head_category_template").val(),o=!1;i.find("option").each(function(){e(this).val()==i.val()&&(t=e(this))}),a="-1"==t.val()?1:t.hasClass("level-0")?2:3,"Tabs"==n?2!==a&&(o=!0):"Sidebar"==n?o=!0:a>1&&(o=!0),o?(e(".epkb-categories-icons").hide(),e(".epkb-categories-icons+.epkb-term-options-message").show()):(e(".epkb-categories-icons").show(),e(".epkb-categories-icons+.epkb-term-options-message").hide())});function c(){e("#epkb_font_icon").click(),e("#epkb_head_category_thumbnail_size").val(e("#epkb_head_category_thumbnail_size").find("option").eq(0).val()),e(".epkb-category-image__button").addClass("epkb-category-image__button--no-image"),e(".epkb-category-image__button").removeClass("epkb-category-image__button--have-image"),e(".epkb-category-image__button").css({"background-image":""}),e("#epkb_head_category_icon_image").val(0),e("div[data-key=ep_font_icon_document]").click()}e(document).ajaxComplete(function(a,t,i){if(!i)return;let n,o=i.data.split("&");for(n=0;n<o.length;n++)sParameterName=o[n].split("="),"action"===sParameterName[0]&&"add-tag"===sParameterName[1]&&(c(),e("html, body").animate({scrollTop:e(".wp-heading-inline").offset().top},300))})}if(e(".epkb-manage-kb-container").length){e(".epkb-manage-tabs__button__title").click(function(){let a=e(this).data("kb_id");if("undefined"!=a&&a)return e(".epkb-manage-tabs__button").removeClass("active"),e(this).parent().addClass("active"),e(".epkb-manage-content").removeClass("active"),e(e(this).data("target")).addClass("active"),!1}),e(".epkb-manage-content__tab-button").click(function(){return e(this).parent().find(".epkb-manage-content__tab-button").removeClass("active"),e(this).addClass("active"),e(this).closest(".epkb-manage-content").find(".epkb-manage-content__tab").removeClass("active"),e(e(this).data("target")).addClass("active"),!1}),e(".epkb-delete-kbs .error-btn").click(function(){return e(this).closest(".epkb-delete-kbs").find(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active"),!1}),e(".epkb-dbf__close, .epkb-dbf__footer__cancel__btn").click(function(){e(this).closest(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active")}),e(".epkb-delete-kbs .epkb-dbf__footer__accept__btn").click(function(){e(this).closest("form").length&&e(this).closest("form").submit()});var s=e(".epkb-import-kbs input[type=submit]");e("input[name=import_file]").change(function(){e(this).val()&&(s.attr("disabled",!1),s.removeClass("error-btn"),s.addClass("success-btn"))})}});