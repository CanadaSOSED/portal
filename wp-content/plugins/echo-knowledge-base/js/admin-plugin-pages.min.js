jQuery(document).ready(function(s){var e,t,r=s("#ekb-admin-page-wrap");s("#epkb-list-of-kbs").on("change",function(e){var a=s(this).find(":selected").data("kb-admin-url");a&&(window.location.href=a)}),function(){function e(a,n){r.find(a+" > .nav_tab").on("click",function(){r.find(a+" > .nav_tab").removeClass("active"),s(this).addClass("active"),r.find(n+" > .ekb-admin-page-tab-panel").removeClass("active");var e=s(this).index()+1;r.find(n+" > .ekb-admin-page-tab-panel:nth-child( "+e+" ) ").addClass("active")})}e("#welcome_tab_nav","#welcome_panel_container"),e(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),e(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),e("#help_tabs_nav","#help_tab_panel")}(),r.find("#epkb_send_feedback").on("click",function(e){r.find(".required").remove(),s(".eckb-top-notice-message").html(""),e.preventDefault();var a=r.find("#your_feedback").val().trim(),n=r.find("#your_email").val().trim(),i=r.find("#your_name").val().trim(),o=!0;if(a||(r.find("#your_feedback").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),o=!1),n||(r.find("#your_email").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),o=!1),i||(r.find("#your_name").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),o=!1),0!=o){var t,c={action:"epkb_send_feedback",_wpnonce_epkb_send_feedback:s("#_wpnonce_epkb_send_feedback").val(),email:n,name:i,feedback:a};s.ajax({type:"POST",dataType:"json",data:c,url:ajaxurl,beforeSend:function(e){s("#epkb-ajax-in-progress").text(epkb_vars.sending_feedback).dialog("open")}}).done(function(e){t=(e=e||"").error||void 0===e.message?e.message?e.message:d("",epkb_vars.reload_try_again,"error"):e.message}).fail(function(e,a,n){t=n?" ["+n+"]":epkb_vars.unknown_error,t=d(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,t,"error")}).always(function(){s("#epkb-ajax-in-progress").dialog("close"),t&&(s(".eckb-top-notice-message").replaceWith(t),s("html, body").animate({scrollTop:0},"slow"))})}}),r.find(".ekb-feedback-btn").on("click",function(){r.find(".ekb-feedback-btn").removeClass("ekb-feedback-btn-active"),s(this).addClass("ekb-feedback-btn-active"),"feature-request"===s(this).attr("id")&&r.find("#epkb_feedback_form").show()}),r.find("#epkb_toggle_debug").on("click",function(){s(".eckb-top-notice-message").html("");var i,e={action:"epkb_toggle_debug",_wpnonce_epkb_toggle_debug:s("#_wpnonce_epkb_toggle_debug").val()};s.ajax({type:"POST",dataType:"json",url:ajaxurl,data:e,beforeSend:function(e){s("#epkb-ajax-in-progress").text(epkb_vars.changing_debug).dialog("open")}}).done(function(e){(e=e||"").error||void 0===e.message?i=e.message?e.message:d("",epkb_vars.reload_try_again,"error"):window.location.href=window.location.href+"&info_tab=debug"}).fail(function(e,a,n){i=n?" ["+n+"]":epkb_vars.unknown_error,i=d(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,i,"error")}).always(function(){s("#epkb-ajax-in-progress").dialog("close"),i&&(s(".eckb-top-notice-message").replaceWith(i),s("html, body").animate({scrollTop:0},"slow"))})}),r.find("#close_intro").on("click",function(){r.find(".welcome_header").hide(),s.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"epkb_close_welcome_header"}})}),r.find(".featured_img").on("click",function(e){var a;e.preventDefault(),e.stopPropagation(),r.find(".image_zoom").remove();var n=s(this).find("img");a=1<n.length?s(n[0]).is(":visible")?s(n[0]).attr("src"):s(n[1]).is(":visible")?s(n[1]).attr("src"):s(n[2]).attr("src"):s(this).find("img").attr("src"),s(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+a+'" class="image_zoom"><span class="close icon_close"></span></div>'),s("html, body").bind("click.epkb",function(){s("#epkb_image_zoom").remove(),s("html, body").unbind("click.epkb")})}),s("#kb_name").on("keyup",function(){var e=25-s(this).val().length;s("#character_value").remove(),e<0&&s(this).after('<div id="character_value" class="input_error"><p>'+epkb_vars.reduce_name_size+"</p></div>")}),s("#epkb-welcome-page-img1-thumb").on("click",function(){s("#epkb-welcome-page-img1").show(),s("#epkb-welcome-page-img2").hide(),s("#epkb-welcome-page-img3").hide()}),s("#epkb-welcome-page-img2-thumb").on("click",function(){s("#epkb-welcome-page-img2").show(),s("#epkb-welcome-page-img1").hide(),s("#epkb-welcome-page-img3").hide()}),s("#epkb-welcome-page-img3-thumb").on("click",function(){s("#epkb-welcome-page-img3").show(),s("#epkb-welcome-page-img1").hide(),s("#epkb-welcome-page-img2").hide()}),s("#add_on_panels").on("click",".ep_font_icon_info",function(){s(this).parent().find(".ep_font_icon_info_content").toggle()}),0<s(".eckb-bottom-notice-message").length&&(clearTimeout(e),e=setTimeout(function(){var e=s("body").find(".eckb-bottom-notice-message");e.length&&e.addClass("fadeOutDown")},1e4)),s("body").find(".epkb-close-notice").on("click",function(){s(this).parent().addClass("fadeOutDown")}),t=s("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){s(this).dialog("close")}},close:function(){s("#epkb-dialog-info-icon-msg").html()}}),r.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var e=!1,a="",n=s(this).parent().find(".label").text();n=n||"";var i=s(this).find("p").html();if(i){var o=i.split("@");i=o[0]?o[0]:epkb_vars.help_text_coming,o[1]&&(e=!0,a='<img class="epkb-help-image" src="'+o[1]+'">')}else i=epkb_vars.help_text_coming;s("#epkb-dialog-info-icon-msg").html("<p>"+i+"</p><br/>"+a),t.dialog({title:n,width:e?1e3:400,maxHeight:e?750:300,open:function(){s("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){t.dialog("option",{position:{my:"center",at:"center",of:window}})}),s(".ui-widget-overlay").bind("click",function(){s("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),s("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),s(".ui-dialog-titlebar").hide(),r.on("click",".eckb-tooltip-button",function(){s(this).parent().find(".eckb-tooltip-contents").fadeToggle()});var a=s(".epkb-analytics-container");function d(e,a,n){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+n+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+"</span></div></div>"}a.find(".page-icon").on("click",function(){a.find(".eckb-config-content").removeClass("epkb-active-content"),a.find(".eckb-nav-section").removeClass("epkb-active-nav");var e=s(this).attr("id");a.find("#"+e+"-content").addClass("epkb-active-content"),a.find(this).parents(".eckb-nav-section").addClass("epkb-active-nav")})});