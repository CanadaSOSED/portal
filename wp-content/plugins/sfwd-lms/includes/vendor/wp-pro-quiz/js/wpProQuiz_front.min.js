!function (e) { e.wpProQuizFront = function (i, t) { var o, n, s, r, a = e(i), u = t, d = this, c = new Object, p = new Object, l = 0, h = null, f = [], w = "", m = !1, v = 1, _ = 0, z = null, Q = "", P = "", g = { randomAnswer: 0, randomQuestion: 0, disabledAnswerMark: 0, checkBeforeStart: 0, preview: 0, cors: 0, isAddAutomatic: 0, quizSummeryHide: 0, skipButton: 0, reviewQustion: 0, autoStart: 0, forcingQuestionSolve: 0, hideQuestionPositionOverview: 0, formActivated: 0, maxShowQuestion: 0, sortCategories: 0 }, q = { isQuizStart: 0, isLocked: 0, loadLock: 0, isPrerequisite: 0, isUserStartLocked: 0 }, y = 'input[name="check"]', k = 'input[name="next"]', x = ".wpProQuiz_questionList", S = 'input[name="skip"]', b = 'input[name="wpProQuiz_pageLeft"]', I = 'input[name="wpProQuiz_pageRight"]', j = { back: a.find('input[name="back"]'), next: a.find(k), quiz: a.find(".wpProQuiz_quiz"), questionList: a.find(".wpProQuiz_list"), results: a.find(".wpProQuiz_results"), sending: a.find(".wpProQuiz_sending"), quizStartPage: a.find(".wpProQuiz_text"), timelimit: a.find(".wpProQuiz_time_limit"), toplistShowInButton: a.find(".wpProQuiz_toplistShowInButton"), listItems: e() }, C = { token: "", isUser: 0 }, T = 0, L = 1, A = (o = u.timelimit, n = 0, s = {}, r = "ldadv-time-limit-" + u.user_id + "-" + u.quizId, s.stop = function () { o && (e.removeCookie(r), window.clearInterval(n), j.timelimit.hide()) }, s.start = function () { if (o) { e.cookie.raw = !0; var i = 1e3 * o, t = e.cookie(r), a = t || o, u = 1e3 * a, c = j.timelimit.find("span").text(d.methode.parseTime(a)), p = j.timelimit.find(".wpProQuiz_progress"); j.timelimit.show(); var l = +new Date; n = window.setInterval(function () { var o = +new Date - l, n = u - o; o >= 500 && (t = n / 1e3, c.text(d.methode.parseTime(Math.ceil(t))), e.cookie(r, t)), p.css("width", n / i * 100 + "%"), n <= 0 && (s.stop(), d.methode.finishQuiz(!0)) }, 16) } }, s), D = new function () { var i = [], t = [], o = [], n = [], s = 0, r = 0, u = 0, c = 0, p = 0, l = []; function h(e) { var i = "", t = l[e]; t.solved ? i = "wpProQuiz_reviewQuestionSolved" : t.review && (i = "wpProQuiz_reviewQuestionReview"), n.eq(e).removeClass("wpProQuiz_reviewQuestionSolved"), n.eq(e).removeClass("wpProQuiz_reviewQuestionReview"), "" != i && n.eq(e).addClass(i) } function f(e) { e.preventDefault(); var i = e.pageY - r; i < 0 && (i = 0), i > s && (i = s); var n = u * i; o.attr("style", "margin-top: " + -n + "px !important"), t.css({ top: i }) } function w(i) { i.preventDefault(), e(document).unbind(".scrollEvent") } this.init = function () { i = a.find(".wpProQuiz_reviewQuestion"), t = i.find("div"), o = i.find("ol"), n = o.children(), t.mousedown(function (i) { i.preventDefault(), i.stopPropagation(), r = i.pageY - t.offset().top + c, e(document).bind("mouseup.scrollEvent", w), e(document).bind("mousemove.scrollEvent", f) }), n.click(function (i) { d.methode.showQuestion(e(this).index()) }), a.bind("questionSolved", function (e) { l[e.values.index].solved = e.values.solved, h(e.values.index) }), a.bind("changeQuestion", function (e) { n.removeClass("wpProQuiz_reviewQuestionTarget"), n.eq(e.values.index).addClass("wpProQuiz_reviewQuestionTarget"), function (e) { var s = n.eq(e), r = s.offset().top, a = i.offset().top, d = r - a; if (d - 4 < 0 || d + 32 > 100) { var c = a - n.eq(0).offset().top - (a - o.offset().top) + s.position().top; c > p && (c = p); var l = c / u; o.attr("style", "margin-top: " + -c + "px !important"), t.css({ top: l }) } }(e.values.index) }), a.bind("reviewQuestion", function (e) { l[e.values.index].review = !l[e.values.index].review, h(e.values.index) }), i.bind("mousewheel DOMMouseScroll", function (e) { e.preventDefault(); var i = e.originalEvent, n = 20 * (i.wheelDelta ? -i.wheelDelta / 120 : i.detail / 3), s = c - o.offset().top + n; s > p && (s = p), s < 0 && (s = 0); var r = s / u; return o.attr("style", "margin-top: " + -s + "px !important"), t.css({ top: r }), !1 }) }, this.show = function (e) { if (g.reviewQustion && i.parent().show(), a.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").show(), !e) { o.attr("style", "margin-top: 0px !important"), t.css({ top: 0 }); var n = o.outerHeight(), d = i.height(); s = d - t.height(), r = 0, u = (p = n - d) / s, this.reset(), n > 100 && t.show(), c = t.offset().top } }, this.hide = function () { i.parent().hide() }, this.toggle = function () { if (g.reviewQustion) { i.parent().toggle(), n.removeClass("wpProQuiz_reviewQuestionTarget"), a.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").hide(), o.attr("style", "margin-top: 0px !important"), t.css({ top: 0 }); var e = o.outerHeight(), d = i.height(); s = d - t.height(), r = 0, u = (p = e - d) / s, e > 100 && t.show(), c = t.offset().top } }, this.reset = function () { for (var e = 0, i = n.length; e < i; e++)l[e] = {}; n.removeClass("wpProQuiz_reviewQuestionTarget"), n.removeClass("wpProQuiz_reviewQuestionSolved"), n.removeClass("wpProQuiz_reviewQuestionReview") } }; var F = new function () { var e = 0, i = -1, t = 0, o = !1; this.questionStart = function (t) { -1 != i && this.questionStop(), i = t, e = +new Date }, this.questionStop = function () { -1 != i && (c[i].time += Math.round((new Date - e) / 1e3), i = -1) }, this.startQuiz = function () { o && this.stopQuiz(), t = +new Date, o = !0 }, this.stopQuiz = function () { o && (quizEndTimer = +new Date, c.comp.quizTime += Math.round((quizEndTimer - t) / 1e3), c.comp.quizEndTimestamp = quizEndTimer, c.comp.quizStartTimestamp = t, o = !1) }, this.init = function () { } }, E = function (i, t, o, n, s) { void 0 == s && (s = !0); var r = {}; return { singleMulti: function () { var i = n.find(".wpProQuiz_questionInput"); 1 == s && n.find(".wpProQuiz_questionInput").attr("disabled", "disabled"), jQuery(".wpProQuiz_questionListItem", n).each(function (t) { var o = e(this).attr("data-pos"); void 0 !== o && (r[o] = i.eq(t).is(":checked")) }) }, sort_answer: function () { n.children().each(function (i, t) { var o = e(this); r[i] = o.attr("data-pos") }), 1 == s && n.sortable("destroy") }, matrix_sort_answer: function () { var i = n.children(); new Array; statistcAnswerData = { 0: -1 }, i.each(function () { var i = e(this), t = i.attr("data-pos"), o = i.find(".wpProQuiz_maxtrixSortCriterion").children(); o.length && (statistcAnswerData[o.attr("data-pos")] = t), r = statistcAnswerData }), 1 == s && o.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("destroy") }, free_answer: function () { var e = n.children(), i = e.find(".wpProQuiz_questionInput").val(); 1 == s && e.find(".wpProQuiz_questionInput").attr("disabled", "disabled"), r = i }, cloze_answer: function () { r = {}, n.find(".wpProQuiz_cloze").each(function (i, t) { var o = e(this).children(), n = o.eq(0), a = (o.eq(1), d.methode.cleanupCurlyQuotes(n.val())); r[i] = a, 1 == s && n.attr("disabled", "disabled") }) }, assessment_answer: function () { correct = !0; var i = n.find(".wpProQuiz_questionInput"); 1 == s && n.find(".wpProQuiz_questionInput").attr("disabled", "disabled"); var t = 0; i.filter(":checked").each(function () { t += parseInt(e(this).val()) }), r = t }, essay: function () { var e = o.find("ul.wpProQuiz_questionList").data("question_id"), i = n.find(".wpProQuiz_questionEssay").val(), t = n.find("#uploadEssayFile_" + e).val(); void 0 !== i && (r = i), void 0 !== t && (r = t) } }[i](), { response: r } }; function O(i, t, o, n) { if ("single" == i.type || "multiple" == i.type) n.children().each(function (i) { var n = e(this), s = n.attr("data-pos"); void 0 != t[s] && (1 == t[s] && (e(".wpProQuiz_questionInput", n).prop("checked", "checked"), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }))) }); else if ("free_answer" == i.type) n.children().each(function (i) { e(this); e(".wpProQuiz_questionInput", this).val(t) }), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }); else if ("sort_answer" == i.type) jQuery.each(t, function (i, t) { var o = e('li.wpProQuiz_questionListItem[data-pos="' + t + '"]', n), s = e("div.wpProQuiz_sortable", o); e(s).text(); jQuery(n).append(o) }), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }); else if ("matrix_sort_answer" == i.type) jQuery.each(t, function (i, t) { var s = e('.wpProQuiz_matrixSortString .wpProQuiz_sortStringList li[data-pos="' + i + '"]', o), r = e('li.wpProQuiz_questionListItem[data-pos="' + t + '"] ul.wpProQuiz_maxtrixSortCriterion', n); jQuery(s).appendTo(r) }), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }); else if ("cloze_answer" == i.type) jQuery('span.wpProQuiz_cloze input[type="text"]', n).each(function (i) { void 0 !== t[i] && e(this).val(t[i]) }), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }); else if ("assessment_answer" == i.type) e('input.wpProQuiz_questionInput[value="' + t + '"]', n).attr("checked", "checked"), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }); else if ("essay" == i.type) if (n.find("#uploadEssayFile_" + i.id).length) { var s = n.find("#uploadEssayFile_" + i.id); e(s).val(t), e("<p>" + function (e) { if (void 0 != e) return e.split("/").reverse()[0]; return "" }(t) + "</p>").insertAfter(s), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }) } else n.find(".wpProQuiz_questionEssay").length && (n.find(".wpProQuiz_questionEssay").html(t), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } })) } var M = new function () { var i = function (i) { return !(i = e.trim(i)) || 0 === i.length }, t = 0, o = 1, n = 2, s = 3, r = 4, u = 5, d = 6, c = 7, p = 8; this.checkForm = function () { var l = !0; return a.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function () { var a = e(this), h = 1 == a.data("required"), f = a.data("type"), w = !0, m = e.trim(a.val()); switch (f) { case t: case o: case c: h && (w = !i(m)); break; case n: !h && i(m) || (w = !i(m) && !isNaN(m)); break; case r: !h && i(m) || (w = !i(m) && new RegExp(/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/).test(m)); break; case s: h && (w = a.is(":checked")); break; case u: case p: h && (w = void 0 !== a.find('input[type="radio"]:checked').val()); break; case d: var v = 0, _ = 0; a.find("select").each(function () { v++ , _ += i(e(this).val()) ? 0 : 1 }), (h || _ > 0) && (w = v == _) }w ? a.siblings(".wpProQuiz_invalidate").hide() : (l = !1, a.siblings(".wpProQuiz_invalidate").show()) }), l }, this.getFormData = function () { var i = {}; return a.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function () { var a = e(this), l = a.data("form_id"); switch (a.data("type")) { case t: case o: case c: case n: case r: i[l] = a.val(); break; case s: i[l] = a.is(":checked") ? 1 : 0; break; case u: case p: i[l] = a.find('input[type="radio"]:checked').val(); break; case d: i[l] = { day: a.find('select[name="wpProQuiz_field_' + l + '_day"]').val(), month: a.find('select[name="wpProQuiz_field_' + l + '_month"]').val(), year: a.find('select[name="wpProQuiz_field_' + l + '_year"]').val() } } }), i } }; d.methode = { parseBitOptions: function () { if (u.bo) { g.randomAnswer = 1 & u.bo, g.randomQuestion = 2 & u.bo, g.disabledAnswerMark = 4 & u.bo, g.checkBeforeStart = 8 & u.bo, g.preview = 16 & u.bo, g.isAddAutomatic = 64 & u.bo, g.reviewQustion = 128 & u.bo, g.quizSummeryHide = 256 & u.bo, g.skipButton = 512 & u.bo, g.autoStart = 1024 & u.bo, g.forcingQuestionSolve = 2048 & u.bo, g.hideQuestionPositionOverview = 4096 & u.bo, g.formActivated = 8192 & u.bo, g.maxShowQuestion = 16384 & u.bo, g.sortCategories = 32768 & u.bo; var e = 32 & u.bo; e && void 0 != jQuery.support && void 0 != jQuery.support.cors && 0 == jQuery.support.cors && (g.cors = e) } }, setClozeStyle: function () { a.find(".wpProQuiz_cloze input").each(function () { for (var i = e(this), t = "", o = i.data("wordlen"), n = 0; n < o; n++)t += "w"; var s = e(document.createElement("span")).css("visibility", "hidden").text(t).appendTo(e("body")), r = s.width(); s.remove(), i.width(r + 5) }) }, parseTime: function (e) { var i = parseInt(e % 60), t = parseInt(e / 60 % 60), o = parseInt(e / 3600 % 24); return i = (i > 9 ? "" : "0") + i, t = (t > 9 ? "" : "0") + t, (o = (o > 9 ? "" : "0") + o) + ":" + t + ":" + i }, cleanupCurlyQuotes: function (i) { return i = (i = (i = (i = i.replace(/\u2018/, "'")).replace(/\u2019/, "'")).replace(/\u201C/, '"')).replace(/\u201D/, '"'), e.trim(i) }, resetMatrix: function (i) { i.each(function () { var i = e(this), t = i.find(".wpProQuiz_sortStringList"); i.find(".wpProQuiz_sortStringItem").each(function () { t.append(e(this)) }) }) }, marker: function (e, i) { g.disabledAnswerMark || (i ? e.addClass("wpProQuiz_answerCorrect") : e.addClass("wpProQuiz_answerIncorrect")) }, startQuiz: function (i) { if (q.loadLock) q.isQuizStart = 1; else { if (q.isQuizStart = 0, q.isLocked) return j.quizStartPage.hide(), void a.find(".wpProQuiz_lock").show(); if (q.isPrerequisite) return j.quizStartPage.hide(), void a.find(".wpProQuiz_prerequisite").show(); if (q.isUserStartLocked) return j.quizStartPage.hide(), void a.find(".wpProQuiz_startOnlyRegisteredUser").show(); if (g.maxShowQuestion && !i) { if (u.formPos == T && !M.checkForm()) return; return j.quizStartPage.hide(), a.find(".wpProQuiz_loadQuiz").show(), void d.methode.loadQuizDataAjax(!0) } if (!g.formActivated || u.formPos != T || M.checkForm()) { switch (d.methode.loadQuizData(), g.randomQuestion && d.methode.random(j.questionList), g.randomAnswer && d.methode.random(a.find(x)), g.sortCategories && d.methode.sortCategories(), d.methode.random(a.find(".wpProQuiz_sortStringList")), d.methode.random(a.find('.wpProQuiz_questionList[data-type="sort_answer"]')), a.find(".wpProQuiz_listItem").each(function (i, t) { var o = e(this); o.find(".wpProQuiz_question_page span:eq(0)").text(i + 1), o.find("> h5 span").text(i + 1), o.find(".wpProQuiz_questionListItem").each(function (i, t) { e(this).find("> span:not(.wpProQuiz_cloze)").text(i + 1 + ". ") }) }), j.next = a.find(k), u.mode) { case 3: a.find('input[name="checkSingle"]').show(); break; case 2: a.find(y).show(), !g.skipButton && g.reviewQustion && a.find(S).show(); break; case 1: a.find('input[name="back"]').slice(1).show(); case 0: j.next.show() }(g.hideQuestionPositionOverview || 3 == u.mode) && a.find(".wpProQuiz_question_page").hide(); var o = j.next.last(); w = o.val(), o.val(u.lbn); var n = j.questionList.children(); if (j.listItems = a.find(".wpProQuiz_list > li"), 3 == u.mode) d.methode.showSinglePage(0); else { var s = (h = n.eq(0).show()).find(x).data("question_id"); F.questionStart(s) } F.startQuiz(), a.find(".wpProQuiz_sortable").parents("ul").sortable({ update: function (i, t) { var o = e(this).parents(".wpProQuiz_listItem"); a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }) } }).disableSelection(), a.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable({ connectWith: ".wpProQuiz_maxtrixSortCriterion:not(:has(li)), .wpProQuiz_sortStringList", placeholder: "wpProQuiz_placehold", update: function (i, t) { var o = e(this).parents(".wpProQuiz_listItem"); a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }) } }).disableSelection(), f = [], A.start(), l = +new Date, c = { comp: { points: 0, correctQuestions: 0, quizTime: 0 } }, a.find(".wpProQuiz_questionList").each(function () { var i = e(this).data("question_id"); c[i] = { time: 0 } }), p = {}, e.each(t.catPoints, function (e, i) { p[e] = 0 }), j.quizStartPage.hide(), a.find(".wpProQuiz_loadQuiz").hide(), j.quiz.show(), D.show(), d.methode.CookieInit(), 3 != u.mode && a.trigger({ type: "changeQuestion", values: { item: h, index: h.index() } }) } } }, viewUserQuizStatistics: function (e) { var i = jQuery(e).data("ref_id"), t = { action: "wp_pro_quiz_admin_ajax", func: "statisticLoadUser", data: { quizId: jQuery(e).data("quiz_id"), userId: 0, refId: i, avg: 0 } }; jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show(); var o = jQuery("#wpProQuiz_user_content").hide(); jQuery.ajax({ type: "POST", url: WpProQuizGlobal.ajaxurl, dataType: "json", cache: !1, data: t, error: function (e, i, t) { }, success: function (e) { void 0 !== e.html && (o.html(e.html), jQuery("#wpProQuiz_user_content").show(), jQuery("#wpProQuiz_loadUserData").hide(), o.find(".statistic_data").click(function () { return jQuery(this).parents("tr").next().toggle("fast"), !1 })) } }), jQuery("#wpProQuiz_overlay_close").click(function () { jQuery("#wpProQuiz_user_overlay").hide() }) }, showSingleQuestion: function (e) { var i = e ? Math.ceil(e / u.qpp) : 1; this.showSinglePage(i) }, showSinglePage: function (e) { if ($listItem = j.questionList.children().hide(), u.qpp) { e = e ? +e : 1; var i = Math.ceil(a.find(".wpProQuiz_list > li").length / u.qpp); if (!(e > i)) { var t = a.find(b).hide(), o = a.find(I).hide(), n = a.find('input[name="checkSingle"]').hide(); e > 1 && t.val(t.data("text").replace(/%d/, e - 1)).show(), e == i ? n.show() : o.val(o.data("text").replace(/%d/, e + 1)).show(), v = e; var s = u.qpp * (e - 1); $listItem.slice(s, s + u.qpp).show(), d.methode.scrollTo(j.quiz) } } else $listItem.show() }, nextQuestion: function () { d.methode.CookieProcessQuestionResponse(h), jQuery(".mejs-pause").trigger("click"), this.showQuestionObject(h.next()) }, prevQuestion: function () { this.showQuestionObject(h.prev()) }, showQuestion: function (e) { var i = j.listItems.eq(e); if (3 == u.mode || m) return u.qpp && d.methode.showSingleQuestion(e + 1), d.methode.scrollTo(i, 1), void F.startQuiz(); this.showQuestionObject(i) }, showQuestionObject: function (i) { if (!i.length && g.forcingQuestionSolve && g.quizSummeryHide && g.reviewQustion) { list = j.questionList.children(), null != list && list.each(function () { var i = e(this), t = i.find(x); t.data("question_id"); "sort_answer" == u.json[t.data("question_id")].type && a.trigger({ type: "questionSolved", values: { item: i, index: i.index(), solved: !0 } }) }); for (var t = 0, o = a.find(".wpProQuiz_listItem").length; t < o; t++)if (!f[t]) return alert(WpProQuizGlobal.questionsNotSolved), !1 } if (h.hide(), h = i.show(), d.methode.scrollTo(j.quiz), a.trigger({ type: "changeQuestion", values: { item: h, index: h.index() } }), h.length) { var n = h.find(x).data("question_id"); F.questionStart(n) } else d.methode.showQuizSummary() }, skipQuestion: function () { a.trigger({ type: "skipQuestion", values: { item: h, index: h.index() } }), d.methode.nextQuestion() }, reviewQuestion: function () { a.trigger({ type: "reviewQuestion", values: { item: h, index: h.index() } }) }, uploadFile: function (i) { var t = i.currentTarget.id.replace("uploadEssaySubmit_", ""), o = e("#uploadEssay_" + t)[0].files[0]; if (void 0 !== o) { var n = e("#_uploadEssay_nonce_" + t).val(), s = e("#uploadEssaySubmit_" + t); s.val("Uploading..."); var r = new FormData; r.append("action", "learndash_upload_essay"), r.append("nonce", n), r.append("question_id", t), r.append("course_id", u.course_id), r.append("essayUpload", o), e.ajax({ method: "POST", type: "POST", url: WpProQuizGlobal.ajaxurl, data: r, cache: !1, contentType: !1, processData: !1, success: function (i) { if (1 == i.success && void 0 !== i.data.filelink) { e("#uploadEssayFile_" + t).val(i.data.filelink), s.attr("disabled", "disabled"), setTimeout(function () { s.val("Success") }, 1500); var o = e("#uploadEssayFile_" + t).parents(".wpProQuiz_listItem"); a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: !0 } }) } else s.removeAttr("disabled"), s.val("Failed. Try again.") } }) } i.preventDefault() }, showQuizSummary: function () { if (F.questionStop(), F.stopQuiz(), !g.quizSummeryHide && g.reviewQustion) { var i = a.find(".wpProQuiz_checkPage"); i.find("ol:eq(0)").empty().append(a.find(".wpProQuiz_reviewQuestion ol li").clone().removeClass("wpProQuiz_reviewQuestionTarget")).children().click(function (t) { i.hide(), j.quiz.show(), D.show(!0), d.methode.showQuestion(e(this).index()) }); for (var t = 0, o = 0, n = f.length; o < n; o++)f[o] && t++; i.find("span:eq(0)").text(t), D.hide(), j.quiz.hide(), i.show(), d.methode.scrollTo(i) } else g.formActivated && u.formPos == L ? (D.hide(), j.quiz.hide(), d.methode.scrollTo(a.find(".wpProQuiz_infopage").show())) : d.methode.finishQuiz() }, finishQuiz: function (e) { F.questionStop(), F.stopQuiz(), A.stop(); var i = (+new Date - l) / 1e3; i = u.timelimit && i > u.timelimit ? u.timelimit : i, _ = i, a.find(".wpProQuiz_quiz_time span").text(d.methode.parseTime(i)), e && j.results.find(".wpProQuiz_time_limit_expired").show(), d.methode.checkQuestion(j.questionList.children(), !0) }, finishQuizEnd: function () { a.find(".wpProQuiz_correct_answer").text(c.comp.correctQuestions), c.comp.result = Math.round(c.comp.points / u.globalPoints * 100 * 100) / 100; var i = !1; if (e.each(c, function () { void 0 !== this.graded_status && "not_graded" == this.graded_status && (i = !0) }), "undefined" != typeof certificate_details && void 0 != certificate_details.certificateLink && "" != certificate_details.certificateLink && c.comp.result >= 100 * certificate_details.certificate_threshold) { var o = a.find(".wpProQuiz_certificate"); 1 == i && "undefined" != typeof certificate_pending && o.html(certificate_pending), o.show() } var n = a.find(".quiz_continue_link"), s = !1; jQuery(n).hasClass("show_quiz_continue_buttom_on_fail") && (s = !0), void 0 !== t.passingpercentage && parseFloat(t.passingpercentage) >= 0 ? c.comp.result >= t.passingpercentage || s ? "undefined" != typeof continue_details && (a.find(".quiz_continue_link").html(continue_details), a.find(".quiz_continue_link").show()) : a.find(".quiz_continue_link").hide() : "undefined" != typeof continue_details && (a.find(".quiz_continue_link").html(continue_details), a.find(".quiz_continue_link").show()), $pointFields = a.find(".wpProQuiz_points span"), $gradedPointsFields = a.find(".wpProQuiz_graded_points span"), $pointFields.eq(0).text(c.comp.points), $pointFields.eq(1).text(u.globalPoints), $pointFields.eq(2).text(c.comp.result + "%"), $gradedQuestionCount = 0, $gradedQuestionPoints = 0, e.each(c, function (i, t) { if (e.isNumeric(i) && t.graded_id) { var o = t.possiblePoints - t.points; o > 0 && ($gradedQuestionPoints += o, $gradedQuestionCount++) } }), $gradedQuestionCount > 0 && (e(".wpProQuiz_points").hide(), e(".wpProQuiz_graded_points").show(), $gradedPointsFields.eq(0).text(c.comp.points), $gradedPointsFields.eq(1).text(u.globalPoints), $gradedPointsFields.eq(2).text(c.comp.result + "%"), $gradedPointsFields.eq(3).text($gradedQuestionCount), $gradedPointsFields.eq(4).text($gradedQuestionPoints)), a.find(".wpProQuiz_resultsList > li").eq(d.methode.findResultIndex(c.comp.result)).show(), d.methode.setAverageResult(c.comp.result, !1), this.setCategoryOverview(), d.methode.sendCompletedQuiz(), g.isAddAutomatic && C.isUser && d.methode.addToplist(), D.hide(), a.find(".wpProQuiz_checkPage, .wpProQuiz_infopage").hide(), j.quiz.hide() }, sending: function (e, i, t) { j.sending.show(); var o, n = j.sending.find(".sending_progress_bar"); if (o = void 0 == typeof e || null == e ? parseInt(100 * n.width() / n.offsetParent().width()) + 156 : e, void 0 == i) i = 80; void 0 == t && (t = 1), null != z && void 0 != typeof z && clearInterval(z), z = setInterval(function () { var e = parseInt(100 * n.width() / n.offsetParent().width()); e >= i && (clearInterval(z), e >= 100 && setTimeout(d.methode.showResults(), 2e3)), n.css("width", o + "%"), o += t }, 300) }, showResults: function () { j.sending.hide(), j.results.show(), d.methode.scrollTo(j.results) }, setCategoryOverview: function () { c.comp.cats = {}, a.find(".wpProQuiz_catOverview li").each(function () { var i = e(this), t = i.data("category_id"); if (void 0 === u.catPoints[t]) return i.hide(), !0; var o = Math.round(p[t] / u.catPoints[t] * 100 * 100) / 100; c.comp.cats[t] = o, i.find(".wpProQuiz_catPercent").text(o + "%"), i.show() }) }, questionSolved: function (e) { f[e.values.index] = e.values.solved }, sendCompletedQuiz: function () { if (!g.preview) { var i; i = c, a.find(".wpProQuiz_questionList").each(function () { var t = e(this), o = t.data("question_id"), n = t.data("type"), s = {}; if ("single" == n || "multiple" == n) t.find(".wpProQuiz_questionListItem").each(function () { s[e(this).attr("data-pos")] = +e(this).find(".wpProQuiz_questionInput").is(":checked") }); else if ("free_answer" == n) s[0] = t.find(".wpProQuiz_questionInput").val(); else { if ("sort_answer" == n) return !0; if ("matrix_sort_answer" == n) return !0; if ("cloze_answer" == n) { var r = 0; t.find(".wpProQuiz_cloze input").each(function () { s[r++] = e(this).val() }) } else if ("assessment_answer" == n) s[0] = "", t.find(".wpProQuiz_questionInput:checked").each(function () { s[e(this).data("index")] = e(this).val() }); else if ("essay" == n) return } i[o].data = s }); var t = M.getFormData(); jQuery.post(WpProQuizGlobal.ajaxurl, { action: "wp_pro_quiz_completed_quiz", course_id: u.course_id, lesson_id: u.lesson_id, topic_id: u.topic_id, quiz: u.quiz, quizId: u.quizId, results: JSON.stringify(c), timespent: _, forms: t, quiz_nonce: u.quiz_nonce }).success(function (e) { d.methode.sending(null, 100, 15), d.methode.CookieDelete() }) } }, findResultIndex: function (e) { for (var i = u.resultsGrade, t = -1, o = 999999, n = 0; n < i.length; n++) { var s = i[n]; e >= s && e - s < o && (o = e - s, t = n) } return t }, showQustionList: function () { m = !m, j.toplistShowInButton.hide(), j.quiz.toggle(), a.find(".wpProQuiz_QuestionButton").hide(), j.questionList.children().show(), D.toggle(), a.find(".wpProQuiz_question_page").hide() }, random: function (i) { i.each(function () { var i = e(this).children().get().sort(function () { return Math.round(Math.random()) - .5 }); e(i).appendTo(i[0].parentNode) }) }, sortCategories: function () { var i = e(".wpProQuiz_list").children().get().sort(function (i, t) { var o = e(i).find(".wpProQuiz_questionList").data("question_id"), n = e(t).find(".wpProQuiz_questionList").data("question_id"); return u.json[o].catId - u.json[n].catId }); e(i).appendTo(i[0].parentNode) }, restartQuiz: function () { j.results.hide(), j.quizStartPage.show(), j.questionList.children().hide(), j.toplistShowInButton.hide(), D.hide(), a.find(".wpProQuiz_questionInput, .wpProQuiz_cloze input").removeAttr("disabled").removeAttr("checked").css("background-color", ""), a.find('.wpProQuiz_questionListItem input[type="text"]').val(""), a.find(".wpProQuiz_answerCorrect, .wpProQuiz_answerIncorrect").removeClass("wpProQuiz_answerCorrect wpProQuiz_answerIncorrect"), a.find(".wpProQuiz_listItem").data("check", !1), a.find("textarea.wpProQuiz_questionEssay").val(""), a.find("input.uploadEssayFile").val(""), a.find("input.wpProQuiz_upload_essay").val(""), a.find(".wpProQuiz_response").hide().children().hide(), d.methode.resetMatrix(a.find(".wpProQuiz_listItem")), a.find(".wpProQuiz_sortStringItem, .wpProQuiz_sortable").removeAttr("style"), a.find(".wpProQuiz_clozeCorrect, .wpProQuiz_QuestionButton, .wpProQuiz_resultsList > li").hide(), a.find('.wpProQuiz_question_page, input[name="tip"]').show(), a.find(".wpProQuiz_certificate").attr("style", "display: none !important"), j.results.find(".wpProQuiz_time_limit_expired").hide(), j.next.last().val(w), m = !1 }, showSpinner: function () { a.find(".wpProQuiz_spinner").show() }, hideSpinner: function () { a.find(".wpProQuiz_spinner").hide() }, checkQuestion: function (i, t) { var o = void 0 != i, n = {}; (i = void 0 == i ? h : i).each(function () { var i = e(this), t = i.index(), o = i.find(x), s = o.data("question_id"), r = u.json[o.data("question_id")], a = r.type; if (F.questionStop(), i.data("check")) return !0; "single" != r.type && "multiple" != r.type || (a = "singleMulti"), n[s] = E(a, 0, i, o, !0), n[s].question_pro_id = r.id, n[s].question_post_id = r.question_post_id, d.methode.CookieSaveResponse(s, t, r.type, n[s]) }), u.checkAnswers = { list: i, responses: n, endCheck: t, finishQuiz: o }, o ? d.methode.sending(1, 80, 3) : d.methode.showSpinner(), d.methode.ajax({ action: "ld_adv_quiz_pro_ajax", func: "checkAnswers", data: { quizId: u.quizId, quiz: u.quiz, course_id: u.course_id, quiz_nonce: u.quiz_nonce, responses: JSON.stringify(n) } }, function (i) { d.methode.hideSpinner(); var t = u.checkAnswers.list, o = (u.checkAnswers.responses, u.checkAnswers.r, u.checkAnswers.endCheck), n = u.checkAnswers.finishQuiz; t.each(function () { var t = e(this), n = t.find(x), s = n.data("question_id"); if (t.data("check")) return !0; if (void 0 !== i[s]) { var r = i[s]; data = u.json[n.data("question_id")], t.find(".wpProQuiz_response").show(), t.find(y).hide(), t.find(S).hide(), t.find(k).show(), c[data.id].points = r.p, void 0 !== r.p_nonce ? c[data.id].p_nonce = r.p_nonce : c[data.id].p_nonce = "", c[data.id].correct = Number(r.c), c[data.id].data = r.s, void 0 !== r.a_nonce ? c[data.id].a_nonce = r.a_nonce : c[data.id].a_nonce = "", c[data.id].possiblePoints = r.e.possiblePoints, jQuery.isEmptyObject(c[data.id].data) && (void 0 == r.e.type || "sort_answer" != r.e.type && "matrix_sort_answer" != r.e.type || (c[data.id].data = r.e.r)), void 0 !== r.e.graded_id && r.e.graded_id > 0 && (c[data.id].graded_id = r.e.graded_id), void 0 !== r.e.graded_status && (c[data.id].graded_status = r.e.graded_status), c.comp.points += r.p, t.find(".wpProQuiz_response").show(), t.find(y).hide(), t.find(S).hide(), t.find(k).show(), jQuery.isEmptyObject(c[data.id].data) && void 0 !== r.e.type && ("sort_answer" != r.e.type && "matrix_sort_answer" != r.e.type || void 0 !== r.e.r && (c[data.id].data = r.e.r), "essay" == r.e.type && void 0 !== r.e.graded_id && (c[data.id].data = { graded_id: r.e.graded_id })), p[data.catId] += r.p, d.methode.markCorrectIncorrect(r, t, n), r.c ? (void 0 !== r.e.AnswerMessage && (t.find(".wpProQuiz_correct").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage), t.find(".wpProQuiz_correct").trigger("learndash-quiz-answer-response-contentchanged")), t.find(".wpProQuiz_correct").show(), c.comp.correctQuestions += 1) : (void 0 !== r.e.AnswerMessage && (t.find(".wpProQuiz_incorrect").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage), t.find(".wpProQuiz_incorrect").trigger("learndash-quiz-answer-response-contentchanged")), t.find(".wpProQuiz_incorrect").show()), t.find(".wpProQuiz_responsePoints").text(r.p), t.data("check", !0), o || a.trigger({ type: "questionSolved", values: { item: t, index: t.index(), solved: !0 } }) } }), n && d.methode.finishQuizEnd() }) }, markCorrectIncorrect: function (i, t, o) { if (void 0 !== i.e.c) switch (i.e.type) { case "single": case "multiple": o.children().each(function (t) { var o = e(this), n = o.attr("data-pos"); i.e.c[n] ? d.methode.marker(o, !0) : !i.c && i.e.r[n] && d.methode.marker(o, !1) }); break; case "free_answer": var n = o.children(); i.c ? d.methode.marker(n, !0) : d.methode.marker(n, !1); break; case "cloze_answer": o.find(".wpProQuiz_cloze").each(function (t, o) { var n = e(this).children(), s = n.eq(0), r = n.eq(1); d.methode.cleanupCurlyQuotes(s.val()); i.s[t] ? s.css("background-color", "#B0DAB0") : (s.css("background-color", "#FFBABA"), void 0 !== i.e.c[t] && (r.html("(" + i.e.c[t].join() + ")"), r.show())), s.attr("disabled", "disabled") }); break; case "sort_answer": (r = o.children()).each(function (t, o) { var n = e(this); i.e.c[t] == n.attr("data-pos") ? d.methode.marker(n, !0) : d.methode.marker(n, !1) }), r.children().css({ "box-shadow": "0 0", cursor: "auto" }); var s = new Array; jQuery.each(i.e.c, function (e, i) { s[i] = e }), r.sort(function (i, t) { return s[e(i).attr("data-pos")] > s[e(t).attr("data-pos")] ? 1 : -1 }), o.append(r); break; case "matrix_sort_answer": var r = o.children(), a = new Array; statistcAnswerData = { 0: -1 }, r.each(function () { var t = e(this), o = (t.attr("data-pos"), t.find(".wpProQuiz_maxtrixSortCriterion")), n = o.children(), s = n.attr("data-pos"); n.length && i.e.c[s] == t.attr("data-pos") ? d.methode.marker(t, !0) : d.methode.marker(t, !1), a[s] = o }), d.methode.resetMatrix(t), t.find(".wpProQuiz_sortStringItem").each(function () { var i = a[e(this).attr("data-pos")]; void 0 != i && i.append(this) }).css({ "box-shadow": "0 0", cursor: "auto" }) } }, showTip: function () { var i = e(this), t = i.siblings(".wpProQuiz_question").find(x).data("question_id"); i.siblings(".wpProQuiz_tipp").toggle("fast"), c[t].tip = 1, e(document).bind("mouseup.tipEvent", function (i) { var t = a.find(".wpProQuiz_tipp"), o = a.find('input[name="tip"]'); t.is(i.target) || 0 != t.has(i.target).length || o.is(i.target) || (t.hide("fast"), e(document).unbind(".tipEvent")) }) }, ajax: function (i, t, o) { o = o || "json", g.cors && (jQuery.support.cors = !0), void 0 === i.quiz && (i.quiz = u.quiz), void 0 === i.course_id && (i.course_id = u.course_id), void 0 === i.quiz_nonce && (i.quiz_nonce = u.quiz_nonce), e.ajax({ method: "POST", type: "POST", url: WpProQuizGlobal.ajaxurl, data: i, success: t, dataType: o }), g.cors && (jQuery.support.cors = !1) }, checkQuizLock: function () { q.loadLock = 1, d.methode.ajax({ action: "wp_pro_quiz_check_lock", quizId: u.quizId }, function (e) { void 0 != e.lock && (q.isLocked = e.lock.is, e.lock.pre && a.find('input[name="restartQuiz"]').hide()), void 0 != e.prerequisite && (q.isPrerequisite = 1, a.find(".wpProQuiz_prerequisite span").text(e.prerequisite)), void 0 != e.startUserLock && (q.isUserStartLocked = e.startUserLock), q.loadLock = 0, q.isQuizStart && d.methode.startQuiz() }) }, loadQuizData: function () { d.methode.ajax({ action: "wp_pro_quiz_load_quiz_data", quizId: u.quizId }, function (e) { e.toplist && d.methode.handleToplistData(e.toplist), void 0 != e.averageResult && d.methode.setAverageResult(e.averageResult, !0) }) }, setAverageResult: function (e, i) { var t = a.find(".wpProQuiz_resultValue:eq(" + (i ? 0 : 1) + ") > * "); t.eq(1).text(e + "%"), t.eq(0).css("width", 240 * e / 100 + "px") }, handleToplistData: function (e) { var i = a.find(".wpProQuiz_addToplist"), t = i.find(".wpProQuiz_addBox").show().children("div"); if (e.canAdd) if (i.show(), i.find(".wpProQuiz_addToplistMessage").hide(), i.find(".wpProQuiz_toplistButton").show(), C.token = e.token, C.isUser = 0, e.userId) t.hide(), C.isUser = 1, g.isAddAutomatic && i.hide(); else { t.show(); var o = t.children().eq(1); e.captcha ? (o.find('input[name="wpProQuiz_captchaPrefix"]').val(e.captcha.code), o.find(".wpProQuiz_captchaImg").attr("src", e.captcha.img), o.find('input[name="wpProQuiz_captcha"]').val(""), o.show()) : o.hide() } else i.hide() }, scrollTo: function (i, t) { var o = i.offset().top - 100; (t || (window.pageYOffset || document.body.scrollTop) > o) && e("html,body").animate({ scrollTop: o }, 300) }, addToplist: function () { if (!g.preview) { var e = a.find(".wpProQuiz_addToplistMessage").text(WpProQuizGlobal.loadData).show(), i = a.find(".wpProQuiz_addBox").hide(); d.methode.ajax({ action: "wp_pro_quiz_add_toplist", quizId: u.quizId, quiz: u.quiz, token: C.token, name: i.find('input[name="wpProQuiz_toplistName"]').val(), email: i.find('input[name="wpProQuiz_toplistEmail"]').val(), captcha: i.find('input[name="wpProQuiz_captcha"]').val(), prefix: i.find('input[name="wpProQuiz_captchaPrefix"]').val(), results: c, timespent: _ }, function (t) { e.text(t.text), t.clear ? (i.hide(), d.methode.updateToplist()) : i.show(), t.captcha && (i.find(".wpProQuiz_captchaImg").attr("src", t.captcha.img), i.find('input[name="wpProQuiz_captchaPrefix"]').val(t.captcha.code), i.find('input[name="wpProQuiz_captcha"]').val("")) }) } }, updateToplist: function () { "function" == typeof wpProQuiz_fetchToplist && wpProQuiz_fetchToplist() }, registerSolved: function () { a.find('.wpProQuiz_questionInput[type="text"]').change(function (i) { var t = e(this), o = t.parents(".wpProQuiz_listItem"), n = !1; "" != t.val() && (n = !0), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: n } }) }), a.find('.wpProQuiz_questionList[data-type="single"] .wpProQuiz_questionInput, .wpProQuiz_questionList[data-type="assessment_answer"] .wpProQuiz_questionInput').change(function (i) { var t = e(this).parents(".wpProQuiz_listItem"), o = this.checked; a.trigger({ type: "questionSolved", values: { item: t, index: t.index(), solved: o } }) }), a.find(".wpProQuiz_cloze input").change(function () { var i = e(this).parents(".wpProQuiz_listItem"), t = !0; i.find(".wpProQuiz_cloze input").each(function () { if ("" == e(this).val()) return t = !1, !1 }), a.trigger({ type: "questionSolved", values: { item: i, index: i.index(), solved: t } }) }), a.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').change(function (i) { var t = e(this).parents(".wpProQuiz_listItem"), o = 0; t.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').each(function (e) { this.checked && o++ }), a.trigger({ type: "questionSolved", values: { item: t, index: t.index(), solved: !!o } }) }), a.find('.wpProQuiz_questionList[data-type="essay"] textarea.wpProQuiz_questionEssay').change(function (i) { var t = e(this), o = t.parents(".wpProQuiz_listItem"), n = !1; "" != t.val() && (n = !0), a.trigger({ type: "questionSolved", values: { item: o, index: o.index(), solved: n } }) }) }, loadQuizDataAjax: function (i) { d.methode.ajax({ action: "wp_pro_quiz_admin_ajax", func: "quizLoadData", data: { quizId: u.quizId, quiz: u.quiz, quiz_nonce: u.quiz_nonce } }, function (t) { u.globalPoints = t.globalPoints, u.catPoints = t.catPoints, u.json = t.json, j.quiz.remove(), a.find(".wpProQuiz_quizAnker").after(t.content), e("table.wpProQuiz_toplistTable caption span.wpProQuiz_max_points").html(u.globalPoints), j = { back: a.find('input[name="back"]'), next: a.find(k), quiz: a.find(".wpProQuiz_quiz"), questionList: a.find(".wpProQuiz_list"), results: a.find(".wpProQuiz_results"), sending: a.find(".wpProQuiz_sending"), quizStartPage: a.find(".wpProQuiz_text"), timelimit: a.find(".wpProQuiz_time_limit"), toplistShowInButton: a.find(".wpProQuiz_toplistShowInButton"), listItems: e() }, d.methode.initQuiz(), i && d.methode.startQuiz(!0); var o = t.content, n = o.search("wp-audio-shortcode"), s = o.search("wp-video-shortcode"); "-1" == n && "-1" == s || (e.getScript(t.site_url + "/wp-includes/js/mediaelement/mediaelement-and-player.min.js"), e.getScript(t.site_url + "/wp-includes/js/mediaelement/wp-mediaelement.js"), e("<link/>", { rel: "stylesheet", type: "text/css", href: t.site_url + "/wp-includes/js/mediaelement/mediaelementplayer.min.css" }).appendTo("head")) }) }, nextQuestionClicked: function () { var e = h.find(x); if ("sort_answer" == u.json[e.data("question_id")].type) { var i = h.index(); void 0 === f[i] && a.trigger({ type: "questionSolved", values: { item: h, index: i, solved: !0 } }) } if (g.forcingQuestionSolve && !f[h.index()] && (g.quizSummeryHide || !g.reviewQustion)) return alert(WpProQuizGlobal.questionNotSolved), !1; d.methode.nextQuestion() }, initQuiz: function () { d.methode.setClozeStyle(), d.methode.registerSolved(), j.next.click(d.methode.nextQuestionClicked), j.back.click(function () { d.methode.prevQuestion() }), a.find(y).click(function () { if (g.forcingQuestionSolve && !f[h.index()] && (g.quizSummeryHide || !g.reviewQustion)) return alert(WpProQuizGlobal.questionNotSolved), !1; d.methode.checkQuestion() }), a.find('input[name="checkSingle"]').click(function () { if (list = j.questionList.children(), null != list && list.each(function () { var i = e(this), t = i.find(x); t.data("question_id"); "sort_answer" == u.json[t.data("question_id")].type && a.trigger({ type: "questionSolved", values: { item: i, index: i.index(), solved: !0 } }) }), g.forcingQuestionSolve && (g.quizSummeryHide || !g.reviewQustion)) for (var i = 0, t = a.find(".wpProQuiz_listItem").length; i < t; i++)if (!f[i]) return alert(WpProQuizGlobal.questionsNotSolved), !1; d.methode.showQuizSummary() }), a.find('input[name="tip"]').click(d.methode.showTip), a.find('input[name="skip"]').click(d.methode.skipQuestion), a.find('input[name="wpProQuiz_pageLeft"]').click(function () { d.methode.showSinglePage(v - 1) }), a.find('input[name="wpProQuiz_pageRight"]').click(function () { d.methode.showSinglePage(v + 1) }), a.find('input[id^="uploadEssaySubmit"]').click(d.methode.uploadFile), a.trigger("learndash-quiz-init") }, CookieInit: function () { 0 != u.timelimitcookie && (Q = "ld_" + u.quizId + "_quiz_responses", P = "" == (P = jQuery.cookie(Q)) || void 0 == P ? {} : JSON.parse(P), d.methode.CookieSetResponses(), d.methode.CookieResponseTimer()) }, CookieDelete: function () { 0 != u.timelimitcookie && (Q = "ld_" + u.quizId + "_quiz_responses", jQuery.cookie(Q, "")) }, CookieProcessQuestionResponse: function (i) { null != i && i.each(function () { var i = e(this), t = i.index(), o = i.find(x), n = o.data("question_id"), s = u.json[o.data("question_id")], r = s.type; "single" != s.type && "multiple" != s.type || (r = "singleMulti"); var a = E(r, 0, i, o, !1); d.methode.CookieSaveResponse(n, t, s.type, a) }) }, CookieSaveResponse: function (e, i, t, o) { if (0 != u.timelimitcookie) { P[e] = { index: i, value: o.response, type: t }; var n = new Date; n.setTime(n.getTime() + 1e3 * u.timelimitcookie), jQuery.cookie(Q, JSON.stringify(P), { expires: n }) } }, CookieResponseTimer: function () { 0 != u.timelimitcookie && a.bind("questionSolved", function (e) { d.methode.CookieProcessQuestionResponse(e.values.item) }) }, CookieSetResponses: function () { 0 != u.timelimitcookie && (void 0 != P && Object.keys(P).length && j.questionList.children().each(function () { var i = e(this), t = i.find(x), o = t.data("question_id"); if (void 0 != P[o]) { var n = P[o], s = u.json[t.data("question_id")]; s.type === n.type && O(s, n.value, i, t) } })) } }, d.preInit = function () { d.methode.parseBitOptions(), D.init(), a.find('input[name="startQuiz"]').click(function () { return d.methode.startQuiz(), !1 }), a.find('input[name="viewUserQuizStatistics"]').click(function () { return d.methode.viewUserQuizStatistics(this), !1 }), g.checkBeforeStart && !g.preview && d.methode.checkQuizLock(), a.find('input[name="reShowQuestion"]').click(function () { d.methode.showQustionList() }), a.find('input[name="restartQuiz"]').click(function () { d.methode.restartQuiz() }), a.find('input[name="review"]').click(d.methode.reviewQuestion), a.find('input[name="wpProQuiz_toplistAdd"]').click(d.methode.addToplist), a.find('input[name="quizSummary"]').click(d.methode.showQuizSummary), a.find('input[name="endQuizSummary"]').click(function () { if (g.forcingQuestionSolve) { list = j.questionList.children(), null != list && list.each(function () { var i = e(this), t = i.find(x); t.data("question_id"); if ("sort_answer" == u.json[t.data("question_id")].type) { var o = i.index(); void 0 === f[o] && a.trigger({ type: "questionSolved", values: { item: i, index: o, solved: !0 } }) } }); for (var i = 0, t = a.find(".wpProQuiz_listItem").length; i < t; i++)if (!f[i]) return alert(WpProQuizGlobal.questionsNotSolved), !1 } g.formActivated && u.formPos == L && !M.checkForm() || d.methode.finishQuiz() }), a.find('input[name="endInfopage"]').click(function () { M.checkForm() && d.methode.finishQuiz() }), a.find('input[name="showToplist"]').click(function () { j.quiz.hide(), j.toplistShowInButton.toggle() }), a.bind("questionSolved", d.methode.questionSolved), g.maxShowQuestion || d.methode.initQuiz(), g.autoStart && d.methode.startQuiz() }, d.preInit() }, e.fn.wpProQuizFront = function (i) { return this.each(function () { void 0 == e(this).data("wpProQuizFront") && e(this).data("wpProQuizFront", new e.wpProQuizFront(this, i)) }) } }(jQuery);