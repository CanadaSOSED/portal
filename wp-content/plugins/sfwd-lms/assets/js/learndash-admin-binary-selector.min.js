function learndash_binary_selector(e){var r=this;r.selector_div=e,r.selector_id=jQuery(r.selector_div).prop("id"),r.selected_items={},r.selector_data_loaded=!1,r.selector_data=[],this.init=function(){r.get_selector_data(!0),r.get_selector_form_element(),r.update_legend(),r.init_actions(),r.init_pager(),r.init_search()},this.init_actions=function(){jQuery(".learndash-binary-selector-section-middle",r.selector_div).on("click","a.learndash-binary-selector-button-add",r.add_selected_items),jQuery(".learndash-binary-selector-section-middle",r.selector_div).on("click","a.learndash-binary-selector-button-remove",r.remove_selected_items)},this.init_pager=function(){jQuery("ul.learndash-binary-selector-pager",r.selector_div).length&&(jQuery("ul.learndash-binary-selector-pager",r.selector_div).each(function(){var e=this;if(jQuery(e).hasClass("learndash-binary-selector-pager-left"))var t="left";else if(jQuery(e).hasClass("learndash-binary-selector-pager-right"))var t="right";"undefined"!=typeof t&&"undefined"!=typeof r.selector_data[t]&&"undefined"!=typeof r.selector_data[t].pager&&r.update_pager(e,r.selector_data[t].pager)}),jQuery(".learndash-binary-selector-section ul.learndash-binary-selector-pager a",r.selector_div).click(function(e){e.preventDefault(),r.handle_pager(this)}))},this.init_search=function(){if(jQuery(".learndash-binary-selector-search",r.selector_div).length){var e,t={},a=200;jQuery(".learndash-binary-selector-search",r.selector_div).focus(function(){var s=this,n=r.get_section_el(s);if("undefined"!=typeof n){var l=jQuery(r.selector_div).attr("id");if("undefined"!=typeof l){if(jQuery(s).hasClass("learndash-binary-selector-search-left"))var i="left";else{if(!jQuery(s).hasClass("learndash-binary-selector-search-right"))return;var i="right"}t[i]={},t[i].query_data={},"undefined"!=typeof r.selector_data[i]&&"undefined"!=typeof r.selector_data.selector_class&&"undefined"!=typeof r.selector_data.selector_nonce&&"undefined"!=typeof r.selector_data.query_vars&&(t[i].query_data.query_vars=r.selector_data.query_vars,t[i].query_data.query_vars.search="",t[i].query_data.position=i,t[i].query_data.selector_class=r.selector_data.selector_class,t[i].query_data.selector_nonce=r.selector_data.selector_nonce,t[i].selector_html_id=l,t[i].query_data.selected_ids=r.get_selector_form_element(!0),t[i].current_value=jQuery(s).val(),""!=e&&clearInterval(e),e=setInterval(function(){if(t[i].current_value=jQuery(s).val(),""==t[i].current_value){if(t[i].query_data.query_vars.search!=t[i].current_value){t[i].query_data.query_vars.search=t[i].current_value,t[i].query_data.query_vars=r.selector_data.query_vars,t[i].query_data.query_vars.search="";var a={action:"learndash_binary_selector_pager",query_data:t[i].query_data};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:a,error:function(){},success:function(e){"undefined"!=typeof e.html_options&&jQuery(".learndash-binary-selector-items",n).empty().append(e.html_options)}}),jQuery(".learndash-binary-selector-pager",n).length&&jQuery(".learndash-binary-selector-pager",n).show()}}else{if(jQuery(".learndash-binary-selector-pager",n).length&&jQuery(".learndash-binary-selector-pager",n).hide(),t[i].current_value.length>=3&&t[i].query_data.query_vars.search!=t[i].current_value){t[i].query_data.query_vars.search=t[i].current_value,t[i].query_data.query_vars.paged=1;var a={action:"learndash_binary_selector_search",query_data:t[i].query_data};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:a,error:function(){},success:function(e){"undefined"!=typeof e.html_options&&jQuery(".learndash-binary-selector-items",n).empty().append(e.html_options)}})}jQuery(".learndash-binary-selector-search",r.section_el).is(":focus")||clearInterval(e)}},a))}}})}},this.update_legend=function(){var e=jQuery("select.learndash-binary-selector-items-left option",r.selector_div).length;jQuery(".learndash-binary-selector-legend-left span.items-total-count",r.selector_div).html(e);var e=jQuery("select.learndash-binary-selector-items-right option",r.selector_div).length;jQuery(".learndash-binary-selector-legend-right span.items-total-count",r.selector_div).html(e)},this.handle_pager=function(e){var t=r.get_section_el(e);if("undefined"!=typeof t){var a=jQuery(r.selector_div).attr("id");if("undefined"!=typeof a){var s=jQuery(e).parents("ul.learndash-binary-selector-pager");if("undefined"!=typeof s){var n={};if("undefined"!=typeof r.selector_data.query_vars&&(n.query_vars=r.selector_data.query_vars,"undefined"!=typeof r.selector_data.selector_class)){if(n.selector_class=r.selector_data.selector_class,n.selector_nonce=r.selector_data.selector_nonce,n.selector_html_id=a,jQuery(s).hasClass("learndash-binary-selector-pager-left"))var l="left";else if(jQuery(s).hasClass("learndash-binary-selector-pager-right"))var l="right";if("undefined"!=typeof l&&(n.position=l,"undefined"!=typeof r.selector_data[l]&&"undefined"!=typeof r.selector_data[l].pager)){var i=r.selector_data[l].pager;if(jQuery(e).hasClass("learndash-binary-selector-pager-prev")){if(1==i.current_page)return;n.query_vars.paged=parseInt(i.current_page)-1}else if(jQuery(e).hasClass("learndash-binary-selector-pager-next")){if(parseInt(i.current_page)==parseInt(i.total_pages))return;n.query_vars.paged=parseInt(i.current_page)+1}n.selected_ids=r.get_selector_form_element(!0);var o={action:"learndash_binary_selector_pager",query_data:n};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:o,error:function(){},success:function(e){"undefined"!=typeof e.html_options&&jQuery(".learndash-binary-selector-items",t).empty().append(e.html_options),"undefined"!=typeof e["query-vars"]&&(r.selector_data[l]["query-vars"]=e["query-vars"]),"undefined"!=typeof e.pager&&(r.selector_data[l].pager=e.pager,r.update_pager(s,r.selector_data[l].pager),r.update_legend())}})}}}}}},this.update_pager=function(e,r){if("undefined"!=typeof e){if("undefined"!=typeof r.current_page)var t=parseInt(r.current_page);else var t=0;if("undefined"!=typeof r.total_pages)var a=parseInt(r.total_pages);else var a=0;if("undefined"!=typeof r.total_items)var s=parseInt(r.total_items);else var s=0;t>=1&&a>=1?(jQuery(".learndash-binary-selector-pager-info span.current_page",e).html(t),jQuery(".learndash-binary-selector-pager-info span.current_page",e).show(),jQuery(".learndash-binary-selector-pager-info span.total_pages",e).html(a),jQuery(".learndash-binary-selector-pager-info span.total_pages",e).show(),jQuery(".learndash-binary-selector-pager-info span.total_items span.total_items_count",e).html(s),jQuery(".learndash-binary-selector-pager-info span.total_items",e).show(),jQuery(".learndash-binary-selector-pager-info",e).show(),1==t?jQuery(".learndash-binary-selector-pager-prev a",e).hide():jQuery(".learndash-binary-selector-pager-prev a",e).show(),t==a?jQuery(".learndash-binary-selector-pager-next a",e).hide():jQuery(".learndash-binary-selector-pager-next a",e).show()):(jQuery(".learndash-binary-selector-pager-info span.current_page",e).hide(),jQuery(".learndash-binary-selector-pager-info span.total_pages",e).hide(),jQuery(".learndash-binary-selector-pager-prev a",e).hide(),jQuery(".learndash-binary-selector-pager-next a",e).hide())}},this.init_lazy_load=function(){},this.add_selected_items=function(e){e.preventDefault();var t=[];jQuery(".learndash-binary-selector-items-left",r.selector_div).length&&jQuery(".learndash-binary-selector-items-right",r.selector_div).length&&jQuery(".learndash-binary-selector-items-left option:selected",r.selector_div).each(function(){var e=jQuery(this);if(!e.hasClass("learndash-binary-selector-item-disabled")){jQuery(e,r.selector_div).removeClass("learndash-binary-selector-item-selected"),jQuery(e,r.selector_div).clone().appendTo(jQuery(".learndash-binary-selector-items-right",r.selector_div)),jQuery(e,r.selector_div).addClass("learndash-binary-selector-item-disabled"),jQuery(e,r.selector_div).prop("selected",!1),jQuery(e,r.selector_div).prop("disabled",!0);var a=jQuery(e).attr("data-value");""!=a&&t.push(a)}}),r.update_selected_form_element("add",t)},this.remove_selected_items=function(e){e.preventDefault();var t=[];jQuery(".learndash-binary-selector-items-left",r.selector_div).length&&jQuery(".learndash-binary-selector-items-right",r.selector_div).length&&jQuery(".learndash-binary-selector-items-right option:selected",r.selector_div).each(function(){var e=jQuery(this),a=jQuery(e).attr("data-value");""!=a&&t.push(a),jQuery('.learndash-binary-selector-items-left option[data-value="'+a+'"]',r.selector_div).length&&(jQuery('.learndash-binary-selector-items-left option[data-value="'+a+'"]',r.selector_div).removeClass("learndash-binary-selector-item-disabled"),jQuery('.learndash-binary-selector-items-left option[data-value="'+a+'"]',r.selector_div).removeClass("learndash-binary-selector-item-selected"),jQuery('.learndash-binary-selector-items-left option[data-value="'+a+'"]',r.selector_div).prop("disabled",!1)),jQuery(e).remove()}),r.update_selected_form_element("remove",t)},this.get_section_el=function(e){return"undefined"!=typeof e?jQuery(e).parents(".learndash-binary-selector-section"):void 0},this.update_selected_form_element=function(e,t){t.length&&("add"==e?(jQuery.each(t,function(e,t){var a=parseInt(t);-1==jQuery.inArray(a,r.selected_items)&&r.selected_items.push(t)}),r.save_selector_form_element()):"remove"==e&&(jQuery.each(t,function(e,t){var a=parseInt(t),s=jQuery.inArray(a,r.selected_items);-1!==s&&r.selected_items.splice(s,1)}),r.save_selector_form_element()))},this.get_selector_form_element=function(e){"undefined"==typeof e&&(e=!1);var t=jQuery("input.learndash-binary-selector-form-element",r.selector_div).val();return 0==e?(r.selected_items=JSON.parse(t),r.selected_items=jQuery.map(r.selected_items,function(e){return parseInt(e)}),r.selected_items):t},this.save_selector_form_element=function(){jQuery("input.learndash-binary-selector-form-element",r.selector_div).val(JSON.stringify(r.selected_items))},this.sort_right_options=function(){},this.get_selector_data=function(e){if("undefined"==typeof e&&(e=!1),1!=r.selector_data_loaded||e===!0){if(r.selector_data_loaded=!0,element_data=jQuery(r.selector_div).attr("data"),"undefined"==typeof element_data)return;r.selector_data=JSON.parse(element_data)}return r.selector_data},this.get_selector_data_element=function(e){var t=r.get_selector_data();return"undefined"!=typeof t&&"undefined"!=typeof e&&"undefined"!=typeof t[e]?t[e]:void 0},this.set_selector_data_element=function(e,t){r.get_selector_data(),this.selector_data[e]=t},this.update_selector_data=function(e){jQuery(r.selector_div).attr("data",JSON.stringify(e)),this.selector_data=e},this.lazy_load_items=function(e){"undefined"==typeof e&&(e=r.get_selector_data()),"undefined"==typeof e.query_vars.paged&&(e.query_vars.paged=0),e.query_vars.paged=parseInt(e.query_vars.paged)+1;var t={action:"learndash_binary_selector_lazy_loader","query-data":e};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:t,error:function(){},success:function(e){"undefined"!=typeof e&&"undefined"!=typeof e.html_options&&(""!=e.html_options?(jQuery("select.learndash-binary-selector-items-left",r.selector_div).append(e.html_options),delete e.html_options,r.update_selector_data(e),r.update_legend(),r.lazy_load_items(e)):(r.update_selector_data(e),r.set_selected_items()))}})},this.set_selected_items=function(){r.get_selector_form_element(),jQuery("select.learndash-binary-selector-items-right",r.selector_div).empty(),jQuery("select.learndash-binary-selector-items-left > option.learndash-binary-selector-item ",r.selector_div).removeClass("learndash-binary-selector-item-disabled"),jQuery("select.learndash-binary-selector-items-left > option.learndash-binary-selector-item ",r.selector_div).prop("selected",!1),jQuery("select.learndash-binary-selector-items-left > option.learndash-binary-selector-item ",r.selector_div).prop("disabled",!1),jQuery.each(r.selected_items,function(e,t){jQuery('.learndash-binary-selector-items-left option.learndash-binary-selector-item[value="'+t+'"]',r.selector_div).each(function(){var e=jQuery(this);jQuery(e,r.selector_div).clone().appendTo(jQuery(".learndash-binary-selector-items-right",r.selector_div)),jQuery(e,r.selector_div).addClass("learndash-binary-selector-item-disabled"),jQuery(e,r.selector_div).prop("selected",!1),jQuery(e,r.selector_div).prop("disabled",!0)})}),r.update_legend()}}jQuery(document).ready(function(){var e=[];jQuery(".learndash-binary-selector").each(function(){var r=jQuery(this).prop("id");e[r]=new learndash_binary_selector(this),e[r].init()})}),jQuery.expr[":"].Contains=jQuery.expr.createPseudo(function(e){return function(r){return jQuery(r).text().toUpperCase().indexOf(e.toUpperCase())>=0}});