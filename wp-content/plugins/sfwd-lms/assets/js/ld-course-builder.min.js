jQuery(document).ready(function(e){function r(e,r){e.stopImmediatePropagation();var l=jQuery(e.currentTarget).parents("h3"),s=jQuery(l).parent(),d=jQuery(s).find(".learndash-selector-post-listing");("undefined"==typeof r||"open"!=r&&"close"!=r)&&(r=jQuery(d).is(":visible")?"close":"open"),"open"==r?jQuery(d).slideDown("slow",function(){jQuery(e.currentTarget).removeClass("ld-course-builder-action-show"),jQuery(e.currentTarget).addClass("ld-course-builder-action-hide")}):jQuery(d).slideUp("slow",function(){jQuery(e.currentTarget).addClass("ld-course-builder-action-show"),jQuery(e.currentTarget).removeClass("ld-course-builder-action-hide")})}function l(e){g(e.currentTarget);jQuery(e.currentTarget).hasClass("ld-disabled")?jQuery(e.currentTarget).removeClass("ld-selected"):jQuery(e.currentTarget).hasClass("ld-selected")?jQuery(e.currentTarget).removeClass("ld-selected"):jQuery(e.currentTarget).addClass("ld-selected")}function s(e){e.stopImmediatePropagation();var r=jQuery(e.currentTarget).parents(".learndash-selector-container");if("undefined"!=typeof r){var l=jQuery(r).data("ld-type");if("undefined"!=typeof l){var s=jQuery(e.currentTarget).data("page");"undefined"==typeof l&&(s=1),d(s,l,r)}}return!1}function d(e,r,l){var s={action:"learndash_course_builder_selector_pager",course_id:k,query_args:{post_type:r,paged:e}};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:s,error:function(){},success:function(e){"undefined"!=typeof e&&("undefined"!=typeof e.selector_pager&&jQuery(".pager-info",l).html(e.selector_pager),"undefined"!=typeof e.selector_rows&&(jQuery("ul.learndash-selector-post-listing",l).html(e.selector_rows),jQuery("ul.learndash-selector-post-listing li",l).draggable(J[r]),f(r)))}})}function a(e,r){if("undefined"!=typeof e&&"undefined"!=typeof r){var l=jQuery(e).data("ld-type");if("undefined"!=typeof l){var s={action:"learndash_course_builder_selector_search",course_id:k,query_args:{post_type:l,paged:1,s:r}};console.log("search for [%o]",r),jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:s,error:function(){},success:function(r){"undefined"!=typeof r&&"undefined"!=typeof r.selector_rows&&(jQuery("ul.learndash-selector-post-listing",e).html(r.selector_rows),jQuery("ul.learndash-selector-post-listing li",e).draggable(J[l]),f(l))}})}}}function t(){var e=new Object;jQuery("#learndash_course_builder_box_wrap .learndash_builder_items .ld-course-builder-lesson-items").children().each(function(r,l){var s=jQuery(l).data("ld-id");S+=1,e["sfwd-lessons:"+s.toString()]={},jQuery(".ld-course-builder-lesson-topic-items",l).children().each(function(r,l){var d=jQuery(l).data("ld-id");S+=1,e["sfwd-lessons:"+s.toString()]["sfwd-topic:"+d.toString()]={},jQuery(".ld-course-builder-topic-quiz-items",l).children().each(function(r,l){var a=jQuery(l).data("ld-id");e["sfwd-lessons:"+s.toString()]["sfwd-topic:"+d.toString()]["sfwd-quiz:"+a.toString()]={}})}),jQuery(".ld-course-builder-lesson-quiz-items",l).children().each(function(r,l){var d=jQuery(l).data("ld-id");e["sfwd-lessons:"+s.toString()]["sfwd-quiz:"+d.toString()]={}})});var r=!1;return jQuery("#learndash_course_builder_box_wrap .learndash_builder_items .ld-course-builder-course-quiz-items").children().each(function(l,s){var d=jQuery(s).data("ld-id");r=!0,e["sfwd-quiz:"+d.toString()]={}}),1==r&&(S+=1),e}function u(r){var l=e("<div/>").attr("id","ld-selector-draggable-group");if("undefined"!=typeof r&&r.length){var s=0;jQuery(r).each(function(e,r){jQuery(".ld-course-builder-sub-actions",r).hide();var l=jQuery(r).outerWidth();l>s&&(s=l)}),l.css("list-style","none"),l.css("width",s+"px"),l.append(r.clone())}return l}function i(){I=!0,S=0;var e=t();jQuery("#learndash_course_builder_box_wrap .learndash_builder_items .ld-course-steps-total .ld-course-steps-value").html(S);var r=JSON.stringify(e);jQuery("#learndash_course_builder_box_wrap input#learndash_course_builder_data").val(r)}function o(e,r){e.stopImmediatePropagation();var l=jQuery(e.currentTarget).parents(".ld-course-builder-item").first(),s=jQuery(l).find(".ld-course-builder-sub-items").first();("undefined"==typeof r||"open"!=r&&"close"!=r)&&(r=jQuery(s).is(":visible")?"close":"open"),"open"==r?jQuery(s).slideDown("slow",function(){jQuery(e.currentTarget).removeClass("ld-course-builder-action-show"),jQuery(e.currentTarget).addClass("ld-course-builder-action-hide")}):jQuery(s).slideUp("slow",function(){jQuery(e.currentTarget).addClass("ld-course-builder-action-show"),jQuery(e.currentTarget).removeClass("ld-course-builder-action-hide")})}function n(e){var r=jQuery(e.currentTarget).closest(".ld-course-builder-item");if("undefined"!=typeof r&&""!==r){var l=jQuery(r).attr("data-ld-id"),s=jQuery(r).attr("data-ld-type"),d=learndash_course_builder_assets["confirm_remove_"+s];""===d&&(d="Confirm delete");var a=jQuery("span.ld-course-builder-title-text",r).html();if(""!==a&&(d+="\r\n\r\n"+a),confirm(d)){var t=jQuery(r).find(".ld-course-builder-item");"undefined"!=typeof t&&jQuery(t).each(function(e,r){var l=jQuery(r).attr("data-ld-type"),s=jQuery(r).attr("data-ld-id");"undefined"!=typeof l&&"undefined"!=typeof s&&w(l,s,!1)}),w(s,l,!1),jQuery(r).remove(),i()}}}function c(e){var r=jQuery(e.currentTarget).closest("li");if("undefined"!=typeof r&&""!==r){var l=jQuery(r).attr("data-ld-id"),s=jQuery(r).attr("data-ld-type"),d=learndash_course_builder_assets["confirm_trash_"+s];""===d&&(d="Confirm delete");var a=jQuery("span.ld-course-builder-title-text",r).html();if(""!==a&&(d+="\r\n\r\n"+a),confirm(d)){jQuery(r).remove(),Q(s);var t={action:"learndash_course_builder_selector_trash_step",step_args:{post_id:l,post_type:s}};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:t,error:function(){},success:function(e){"undefined"!=typeof e&&e.status===!0}})}}}function h(e){e.stopImmediatePropagation();var r=jQuery(e.currentTarget),l=jQuery(".ld-course-builder-sub-actions",r);if("undefined"!=typeof l){var s=jQuery(r).closest("div#ld-selector-draggable-group").attr("id");if("undefined"==typeof s)if(jQuery(l).is(":visible"))"touchstart"==W&&jQuery(l).hide();else{"touchstart"==W&&jQuery("#learndash_course_builder_box_wrap .ld-course-builder-sub-actions").hide();var d=jQuery(r).position(),a=jQuery(r).outerWidth(),t=jQuery(l).outerWidth();if(jQuery("body").hasClass("rtl"))var u=d.left-t+5+"px";else var u=d.left+a+"px";jQuery(l).css({"background-color":"#B8B8B8",height:"20px",position:"absolute",top:d.top+"px",left:u}).show()}}}function _(e){var r=jQuery(e.currentTarget),l=jQuery(".ld-course-builder-sub-actions",r);"undefined"!=typeof l&&jQuery(l).hide()}function p(e){e.stopImmediatePropagation();var r=!0,l=jQuery(e.currentTarget).closest(".ld-course-builder-item")[0];"undefined"!=typeof l&&(jQuery(l).hasClass("ld-disabled")&&(r=!1),jQuery(l).hasClass("ld-course-builder-title-edit")&&(r=!1),1==r&&jQuery(".ld-course-builder-edit-title-pencil",e.currentTarget).show())}function b(e){e.stopImmediatePropagation(),jQuery(".ld-course-builder-edit-title-pencil",e.currentTarget).hide()}function y(e){e.stopImmediatePropagation();var r=e.currentTarget,l=jQuery(r).parents(".ld-course-builder-item");if("undefined"!=typeof l){if(jQuery(l).hasClass("ld-disabled"))return;if(jQuery(l).hasClass("ld-course-builder-title-edit"))return;jQuery(l).addClass("ld-course-builder-title-edit"),jQuery(l).hasClass("ld-selected")&&jQuery(l).removeClass("ld-selected"),jQuery(".ld-course-builder-actions",l).hide();var s=jQuery(".ld-course-builder-title-text",r).html();jQuery(".ld-course-builder-title-text",r).html('<input type="text" value="'+s+'" />'),jQuery(".ld-course-builder-title-text input",r).focus(),jQuery(".ld-course-builder-title-text input",r).select(),jQuery(".ld-course-builder-edit-title-pencil",r).hide(),jQuery(".ld-course-builder-edit-title-ok",r).show(),jQuery(".ld-course-builder-edit-title-cancel",r).show(),jQuery(r).on("click",".ld-course-builder-edit-title-ok",function(e){e.stopImmediatePropagation();var l=jQuery(e.currentTarget).parents(".ld-course-builder-item");jQuery(l).removeClass("ld-course-builder-title-edit");var d=jQuery(".ld-course-builder-title-text input",r).val();if(jQuery(".ld-course-builder-title-text input",r).remove(),jQuery(".ld-course-builder-edit-title-ok",r).hide(),jQuery(".ld-course-builder-edit-title-cancel",r).hide(),jQuery(".ld-course-builder-actions",l).show(),""!=d&&d!=s){jQuery(".ld-course-builder-title-text",r).html(d);var l=jQuery(r).parents(".ld-course-builder-item");if("undefined"!=typeof l){var a=jQuery(l).data("ld-id"),t=jQuery(l).data("ld-type"),u={action:"learndash_course_builder_selector_set_step_title",new_title:d,step_args:{post_id:a,post_type:t}};jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:u,error:function(){},success:function(e){if("undefined"!=typeof e.status&&e.status===!0){var r=jQuery("#learndash_course_builder_box_wrap .learndash_selectors li#ld-post-"+a);jQuery(".ld-course-builder-title-text",r).html(d);var l=jQuery("#learndash_course_builder_box_wrap .learndash_builder_items #ld-post-"+a);jQuery(".ld-course-builder-title-text",l).first().html(d)}}})}}else jQuery(".ld-course-builder-title-text",r).html(s)}),jQuery(r).on("click",".ld-course-builder-edit-title-cancel",function(e){e.stopImmediatePropagation();var l=jQuery(e.currentTarget).parents(".ld-course-builder-item");if(jQuery(l).removeClass("ld-course-builder-title-edit"),jQuery(".ld-course-builder-title-text input",r).remove(),jQuery(".ld-course-builder-edit-title-ok",r).hide(),jQuery(".ld-course-builder-edit-title-cancel",r).hide(),jQuery(".ld-course-builder-actions",l).show(),jQuery(".ld-course-builder-action-show-hide",l).length){var d=j(l);"undefined"!=typeof d&&jQuery(d).hasClass("learndash_builder_items")&&jQuery(".ld-course-builder-action-show-hide",l).show()}jQuery(".ld-course-builder-title-text",r).html(s)})}}function j(e){if("undefined"!=typeof e){var r=jQuery(e).closest(".learndash_selectors");if("undefined"!=typeof r&&r.length>0)return r[0];var l=jQuery(e).closest(".learndash_builder_items");if("undefined"!=typeof l&&l.length>0)return l[0]}}function f(e){if(""!==e){var r=jQuery('#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container[data-ld-type="'+e+'"]');if("undefined"!=typeof r){var l=jQuery(r).data("ld-selected");"undefined"!=typeof l&&l.length&&jQuery.each(l,function(r,l){w(e,l,!0)})}}}function Q(e){if(""!==e){var r=jQuery('#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container[data-ld-type="'+e+'"]');jQuery("ul#learndash-selector-post-listing-"+e+" li",r).length?(jQuery(".learndash-selector-pager",r).show(),jQuery(".learndash-selector-search",r).show()):(jQuery(".learndash-selector-pager",r).hide(),jQuery(".learndash-selector-search",r).hide())}}function w(e,r,l){if(""!==e&&""!==r){var s=jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-"+e).data("ld-selected");"undefined"==typeof s&&(s=[]);var d=!1;l===!0?(jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-"+e+' ul.learndash-selector-post-listing li[data-ld-id="'+r+'"]').addClass("ld-disabled"),-1===s.indexOf(parseInt(r))&&(s.push(parseInt(r)),d=!0)):(jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-"+e+' ul.learndash-selector-post-listing li[data-ld-id="'+r+'"]').removeClass("ld-disabled"),s=s.filter(function(e){return e!==parseInt(r)}),d=!0),1==d&&jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-"+e).data("ld-selected",s)}}function m(e,r,l){""===e&&""===r||(l===!0?jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-"+e+' ul.learndash-selector-post-listing li[data-ld-id="'+r+'"]').addClass("ld-selected"):jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-"+e+' ul.learndash-selector-post-listing li[data-ld-id="'+r+'"]').removeClass("ld-selected"))}function g(e){if(""!==e){var r=jQuery(e).closest(".learndash-selector-container");if("undefined"!=typeof r){var l=jQuery(r).data("ld-type");return l}}}function v(e){if(e.stopImmediatePropagation(),!jQuery(e.currentTarget).hasClass("ld-course-builder-action-add-pending")){jQuery(e.currentTarget).addClass("ld-course-builder-action-add-pending");var r=jQuery(e.currentTarget).closest(".learndash-selector-container");if("undefined"!=typeof r){var l=jQuery(r).find(".ld-course-builder-action-show-hide");jQuery(l).hasClass("ld-course-builder-action-show")&&jQuery(".ld-course-builder-action-show-hide",r).trigger("click",["open"]);var s=jQuery(r).data("ld-type");if("undefined"!=typeof s){var d=new Date,a=d.getTime(),t="new-step-"+a,u=jQuery(".learndash-row-placeholder li",r).clone();jQuery(u).attr("id",t),jQuery(u).attr("data-ld-id",""),jQuery(u).removeClass("ld-disabled"),jQuery(u).removeClass("ld-selected"),jQuery(u).removeClass("ld-course-builder-title-edit"),jQuery(u).addClass("ld-new-step");var i=jQuery(".ld-course-builder-header .ld-course-builder-title",u);jQuery(i).hasClass("ld-course-builder-title-edit")&&jQuery('input[type="text"]',i).length&&jQuery('input[type="text"]',i).remove(),jQuery("#learndash_course_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-"+s).prepend(u),jQuery("#learndash_course_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-"+s+" li").draggable(J[s]),jQuery("#learndash_course_builder_box_wrap #"+t+" .ld-course-builder-title-text").trigger("click"),Q(s),x(),jQuery(e.currentTarget).removeClass("ld-course-builder-action-add-pending")}}}}function x(){if(""==P&&jQuery("#learndash_course_builder_box_wrap .ld-new-step").length){var e={};if(jQuery("#learndash_course_builder_box_wrap .ld-new-step").each(function(r,l){var s={};s.item_id=jQuery(l).attr("id"),s.post_type=jQuery(l).data("ld-type"),jQuery('input[type="text"]',l).length?s.post_title=jQuery('input[type="text"]',l).val():s.post_title=jQuery(".ld-course-builder-title-text",l).val(),e[s.item_id]=s}),Object.keys(e).length>0){var r={action:"learndash_course_builder_selector_new_step",new_steps:e};P=jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",cache:!1,data:r,error:function(){},success:function(e){"undefined"!=typeof e&&"undefined"!=typeof e.new_steps&&jQuery.each(e.new_steps,function(e,r){jQuery("#learndash_course_builder_box_wrap #"+e).length&&jQuery("#learndash_course_builder_box_wrap #"+e).hasClass("ld-new-step")&&(jQuery("#learndash_course_builder_box_wrap #"+e).removeClass("ld-new-step"),jQuery("#learndash_course_builder_box_wrap #"+e).attr("data-ld-id",r.post_id),jQuery("#learndash_course_builder_box_wrap #"+e+" a.ld-course-builder-action-view").attr("href",r.view_url.replace(/&amp;/g,"&")),jQuery("#learndash_course_builder_box_wrap #"+e+" a.ld-course-builder-action-edit").attr("href",r.edit_url.replace(/&amp;/g,"&")),jQuery("#learndash_course_builder_box_wrap #"+e).attr("id","ld-post-"+r.post_id))}),P="",x()}})}}}function C(){jQuery("#learndash_course_builder_box_wrap .learndash_selectors h3.learndash-selector-header .ld-course-builder-action-show-hide").trigger("click",["open"])}function T(){jQuery("#learndash_course_builder_box_wrap .learndash_selectors h3.learndash-selector-header .ld-course-builder-action-show-hide").trigger("click",["close"])}function q(){jQuery("#learndash_course_builder_box_wrap .learndash_builder_items .ld-course-builder-action-show-hide").trigger("click",["open"])}function z(){jQuery("#learndash_course_builder_box_wrap .learndash_builder_items .ld-course-builder-action-show-hide").trigger("click",["close"])}var k=0,I=!1,S=0,P="",O="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,W=O?"touchstart":"hover";if(jQuery("#learndash_course_builder_box_wrap").length&&(k=jQuery("#learndash_course_builder_box_wrap").data("ld-course-id")),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").length&&(jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container").each(function(e,r){0==e?jQuery(".learndash-selector-post-listing",r).slideDown("slow",function(){jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",r).removeClass("ld-course-builder-action-show"),jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",r).addClass("ld-course-builder-action-hide")}):(jQuery(".learndash-selector-post-listing",r).hide(),jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",r).addClass("ld-course-builder-action-show"),jQuery(".learndash-selector-header .ld-course-builder-action-show-hide",r).removeClass("ld-course-builder-action-hide"));var l=jQuery(r).data("ld-type");"undefined"!=typeof l&&(f(l),Q(l))}),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("click",".ld-course-builder-action-show-hide",r),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("click","li",l),jQuery("#learndash_course_builder_box_wrap").on("click",".learndash_selectors .pager-info button",s),jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-search input").length)){var D,B=250,E=null,H="",U=null;jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-search input").focus(function(e){var r=jQuery(e.currentTarget).parents(".learndash-selector-container");if("undefined"!=typeof r){var l=jQuery(r).data("ld-type");"undefined"!=typeof l&&(E=jQuery(this),U=E.width(),console.log("search_width[%o]",U),jQuery(".learndash-selector-pager",r).hide(),jQuery(".learndash-selector-search",r).width("100%"),D=setInterval(function(){var e=E.val();return 0==e.length&&H!=e?(H=e,a(r,H)):e.length>=3&&H!=e&&(H=e,a(r,H)),E.is(":focus")?void 0:(clearInterval(D),jQuery(".learndash-selector-pager",r).show(),void jQuery(".learndash-selector-search",r).width(U+"px"))},B))}})}var J=[];J["sfwd-lessons"]={cancel:".ld-disabled",handle:".ld-course-builder-action-lesson-move",connectToSortable:"#learndash_course_builder_box_wrap .ld-course-builder-lesson-items",helper:function(){var r=jQuery("#learndash-selector-post-listing-sfwd-lessons li.ld-selected");return 0===r.length&&(r=e(this)),u(r)}},J["sfwd-topic"]={cancel:".ld-disabled",handle:".ld-course-builder-action-topic-move",connectToSortable:"#learndash_course_builder_box_wrap .ld-course-builder-topic-items",helper:function(){var r=jQuery("#learndash-selector-post-listing-sfwd-topic li.ld-selected");return 0===r.length&&(r=e(this)),u(r)}},J["sfwd-quiz"]={cancel:".ld-disabled",handle:".ld-course-builder-action-quiz-move",connectToSortable:"#learndash_course_builder_box_wrap .ld-course-builder-quiz-items",helper:function(){var r=jQuery("#learndash-selector-post-listing-sfwd-quiz li.ld-selected");return 0===r.length&&(r=e(this)),u(r)}};var N=[];N["sfwd-lessons"]={items:"> div.ld-course-builder-lesson-item",handle:".ld-course-builder-action-lesson-move",tolerance:"pointer",opacity:.7,revert:300,delay:150,dropOnEmpty:!0,placeholder:"movable-placeholder",start:function(e,r){r.placeholder.height(r.helper.outerHeight()),jQuery("li",r.helper).css("clear","both"),jQuery("span.ld-course-builder-sub-actions",r.helper).hide()},stop:function(e,r){var l=jQuery(r.item).attr("id");if("ld-selector-draggable-group"==l){var s="",d=jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-lessons").data("ld-selected");"undefined"==typeof d&&(d=[]),r.item.children("li").each(function(){var e=this,r=jQuery(e).data("ld-id");d.push(parseInt(r)),jQuery("span.ld-course-builder-sub-actions",e).hide(),s=s+'<div id="ld-course-builder-lesson-item-'+r+'" class="ld-course-builder-item ld-course-builder-lesson-item" data-ld-type="sfwd-lessons" data-ld-id="'+r+'">'+jQuery(e).html()+"</div>","undefined"!=typeof r&&(w("sfwd-lessons",r,!0),m("sfwd-lessons",r,!1))}),jQuery(r.item).replaceWith(s),jQuery("#learndash_course_builder_box_wrap .ld-course-builder-topic-items").sortable(N["sfwd-topic"]),jQuery("#learndash_course_builder_box_wrap .ld-course-builder-quiz-items").sortable(N["sfwd-quiz"]),d=jQuery.unique(d),jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-lessons").data("ld-selected",d),i()}else jQuery("span.ld-course-builder-sub-actions",r.item).hide(),i()}},N["sfwd-topic"]={items:"> div.ld-course-builder-topic-item",handle:".ld-course-builder-action-topic-move",connectWith:".ld-course-builder-topic-items",placeholder:"movable-placeholder",tolerance:"pointer",opacity:.7,revert:300,delay:150,dropOnEmpty:!0,start:function(e,r){r.placeholder.height(r.helper.outerHeight()),r.placeholder.width("100%"),jQuery("span.ld-course-builder-sub-actions",r.helper).hide()},stop:function(e,r){var l=jQuery(r.item).attr("id");if("ld-selector-draggable-group"==l){var s="",d=jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-topic").data("ld-selected");"undefined"==typeof d&&(d=[]),r.item.children("li").each(function(){var e=this,r=jQuery(e).data("ld-id");d.push(parseInt(r)),jQuery("span.ld-course-builder-sub-actions",e).hide(),s=s+'<div id="ld-course-builder-topic-item-'+r+'" class="ld-course-builder-item ld-course-builder-topic-item" data-ld-type="sfwd-topic" data-ld-id="'+r+'">'+jQuery(e).html()+"</div>","undefined"!=typeof r&&(w("sfwd-topic",r,!0),jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-topic li#ld-post-"+r).removeClass("ld-selected"))}),jQuery(r.item).replaceWith(s),jQuery("#learndash_course_builder_box_wrap .ld-course-builder-quiz-items").sortable(N["sfwd-quiz"]),d=jQuery.unique(d),jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-topic").data("ld-selected",d),i()}else jQuery(r.item).addClass("ld-course-builder-item-update"),jQuery("span.ld-course-builder-sub-actions",r.item).hide(),i()}},N["sfwd-quiz"]={items:"> div.ld-course-builder-quiz-item",handle:".ld-course-builder-action-quiz-move",connectWith:".ld-course-builder-quiz-items",placeholder:"movable-placeholder",tolerance:"pointer",opacity:.7,revert:300,delay:150,dropOnEmpty:!0,start:function(e,r){r.placeholder.height(r.helper.outerHeight()),r.placeholder.width("100%"),jQuery("span.ld-course-builder-sub-actions",r.helper).hide()},stop:function(e,r){var l=jQuery(r.item).attr("id");if("ld-selector-draggable-group"==l){var s="",d=jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-quiz").data("ld-selected");"undefined"==typeof d&&(d=[]),r.item.children("li").each(function(){var e=this,r=jQuery(e).data("ld-id");d.push(parseInt(r)),jQuery("span.ld-course-builder-sub-actions",e).hide(),s=s+'<div id="ld-course-builder-quiz-item-'+r+'" class="ld-course-builder-item ld-course-builder-quiz-item" data-ld-type="sfwd-quiz" data-ld-id="'+r+'">'+jQuery(e).html()+"</div>","undefined"!=typeof r&&(w("sfwd-quiz",r,!0),jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-quiz li#ld-post-"+r).removeClass("ld-selected"))}),jQuery(r.item).replaceWith(s),d=jQuery.unique(d),jQuery("#learndash_course_builder_box_wrap .learndash_selectors .learndash-selector-container-sfwd-quiz").data("ld-selected",d),i()}else"ld-draggable-builder-group"==l?r.item.children("div").each(function(){var e=this;jQuery(e).removeClass("ld-selected")}):(jQuery(r.item).addClass("ld-course-builder-item-update"),jQuery("span.ld-course-builder-sub-actions",r.item).hide(),i())}},jQuery("#learndash_course_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-sfwd-lessons li").draggable(J["sfwd-lessons"]),jQuery("#learndash_course_builder_box_wrap .learndash_builder_items .ld-course-builder-lesson-items").sortable(N["sfwd-lessons"]),jQuery("#learndash_course_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-sfwd-topic li").draggable(J["sfwd-topic"]),jQuery("#learndash_course_builder_box_wrap .ld-course-builder-topic-items").sortable(N["sfwd-topic"]),jQuery("#learndash_course_builder_box_wrap .learndash_selectors ul#learndash-selector-post-listing-sfwd-quiz li").draggable(J["sfwd-quiz"]),jQuery("#learndash_course_builder_box_wrap .ld-course-builder-quiz-items").sortable(N["sfwd-quiz"]),jQuery("#learndash_course_builder_box_wrap .learndash_builder_items").on("click",".ld-course-builder-action-show-hide",o),jQuery("#learndash_course_builder_box_wrap .learndash_builder_items").on("click",".ld-course-builder-action-remove",n),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("click",".ld-course-builder-action-trash",c),window.onbeforeunload=function(){return I===!0?learndash_course_builder_assets.learndash_upload_message:void 0};var A=jQuery("#learndash_course_builder_box_wrap").parents("form");"undefined"!=typeof A&&jQuery(A).submit(function(){I=!1}),"hover"==W?(jQuery("#learndash_course_builder_box_wrap .learndash_builder_items").on("mouseover",".ld-course-builder-actions",h),jQuery("#learndash_course_builder_box_wrap .learndash_builder_items").on("mouseleave",".ld-course-builder-actions",_),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("mouseover",".ld-course-builder-actions",h),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("mouseleave",".ld-course-builder-actions",_)):"touchstart"==W&&(jQuery("#learndash_course_builder_box_wrap .learndash_builder_items").on("click",".ld-course-builder-actions",h),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("click",".ld-course-builder-actions",h)),jQuery("#learndash_course_builder_box_wrap").on("mouseover",".ld-course-builder-title",p),jQuery("#learndash_course_builder_box_wrap").on("mouseleave",".ld-course-builder-title",b),jQuery("#learndash_course_builder_box_wrap").on("click",".ld-course-builder-title",y),jQuery(".learndash_selectors").on("click",".ld-course-builder-action-add",v),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("click",".ld-show-all",C),jQuery("#learndash_course_builder_box_wrap .learndash_selectors").on("click",".ld-hide-all",T),jQuery("#learndash_course_builder_box_wrap .learndash_builder_items").on("click",".ld-show-all",q),jQuery("#learndash_course_builder_box_wrap .learndash_builder_items").on("click",".ld-hide-all",z)});